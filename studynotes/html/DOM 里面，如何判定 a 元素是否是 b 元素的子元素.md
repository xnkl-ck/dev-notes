# **DOM 里面，如何判定 a 元素是否是 b 元素的子元素**

## 前言

在前端开发中，判断一个元素是否为另一个元素的子元素，是操作 DOM 结构和事件委托时常见的需求。理解如何准确判断元素的层级关系，有助于实现高效的事件处理和元素操作。

## 判定方法及原理

判断元素 a 是否是元素 b 的子元素，实际上是判断 a 是否在 b 的后代节点树中。可以使用 DOM 提供的原生方法：

- **Node.contains() 方法**
  `b.contains(a)` 返回一个布尔值，表示 a 是否是 b 本身或其后代节点。它是判断子孙关系最直接和高效的方法。
- **通过遍历父节点链**
  从 a 开始，循环获取其 `parentNode`，逐级向上遍历，如果遇到 b，则说明 a 是 b 的子元素；如果遍历到顶层仍未找到 b，则不是。

示例代码：

```javascript
function isDescendant(a, b) {
  while (a) {
    if (a === b) return true;
    a = a.parentNode;
  }
  return false;
}
```

Node.contains 在现代浏览器中广泛支持，推荐使用。

## 应用场景

- 事件委托中判断事件目标是否属于某个容器内。
- 动态操作 DOM 时确定元素层级关系。
- 防止错误操作或执行条件判断。

## 面试回答

判断元素 a 是否是元素 b 的子元素，通常用 `b.contains(a)`，它会返回 true 如果 a 是 b 自身或其后代节点。也可以通过遍历 a 的父节点链，检查是否遇到 b。使用 `contains` 方法更简洁高效。

## 总结

准确判断元素层级关系是前端事件管理和 DOM 操作的基础。掌握 `Node.contains` 方法及遍历父节点的思路，能帮助开发者写出高效且健壮的代码。