## **样式优先级的规则是什么？**

## 前言

在 CSS 中，多个样式可能会同时作用于同一个元素，这时浏览器会根据样式优先级（Specificity）规则来决定最终应用哪条样式。掌握优先级规则是确保样式正确生效和避免意外覆盖的重要基础，尤其是在大型项目或多人协作开发中，样式冲突和覆盖问题非常常见。

## 样式优先级的计算机制

CSS 优先级是根据选择器的类型来计算的，通常用四位数字（a, b, c, d）来表示，数值越大优先级越高。

a 代表是否为行内样式（inline style），行内样式的优先级最高，值为 1 时可以覆盖其他所有非 `!important` 样式。
b 代表选择器中 ID 选择器的数量，每出现一个 ID 选择器，该位加 1。
c 代表类选择器、属性选择器和伪类选择器的数量。
d 代表元素选择器和伪元素选择器的数量。

计算时，浏览器会依次比较 a → b → c → d 的数值大小，直到分出高低为止。例如，`#header .nav li` 的优先级是 0,1,1,1，比 `.nav li.active` 的 0,0,2,1 高。

## 影响优先级的特殊情况

有三个特殊情况会直接影响优先级判定。

第一是 `!important` 关键字，它会让当前声明在同一属性的比较中拥有最高优先级，但不会跨越不同的 CSS 来源（如用户样式表与浏览器默认样式之间的冲突）。
第二是继承的样式没有优先级，它们只会在没有更具体样式时才生效。
第三是浏览器的默认样式表（User Agent Stylesheet）优先级最低，通常会被任何开发者定义的样式覆盖。

## 应用场景与注意事项

在日常开发中，不推荐频繁使用 `!important`，因为它会破坏样式的可维护性，增加覆盖的难度。更好的做法是利用合理的选择器结构和样式组织来避免冲突，例如在组件化开发中使用作用域样式，或在全局样式中保持选择器简洁。

在大型项目中，如果多个样式来源同时作用，例如浏览器默认样式、第三方 UI 库样式和自定义样式，优先级计算加上加载顺序会共同决定最终结果。因此，除了优先级规则，还需要考虑 CSS 加载顺序和覆盖策略。

## 面试回答

CSS 样式优先级是浏览器决定冲突样式最终生效顺序的规则。优先级计算规则是：行内样式最高，其次是 ID 选择器，再是类、属性、伪类选择器，最后是元素和伪元素选择器。同级别的样式按在 CSS 中的出现顺序，后定义的会覆盖先定义的。`!important` 会让该声明在同属性比较中最高优先级，但不建议滥用。

## 总结

样式优先级规则是 CSS 冲突解决的核心机制，理解 a, b, c, d 的计算方法和 `!important` 的作用，可以帮助开发者在复杂项目中精准控制样式生效顺序。结合合理的选择器结构、组件化样式管理和加载顺序控制，可以有效减少样式冲突和覆盖问题。