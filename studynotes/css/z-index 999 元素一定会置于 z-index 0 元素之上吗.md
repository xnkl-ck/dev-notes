# **z-index: 999 元素一定会置于 z-index: 0 元素之上吗**

## 前言

z-index 是 CSS 中控制元素堆叠顺序的重要属性，它决定了在三维空间中哪个元素显示在上方。理解 z-index 的工作机制以及影响其作用的上下文，对于解决层叠和遮挡问题非常关键。

## z-index 的基本机制

z-index 只有在元素处于定位状态（`position` 为 `relative`、`absolute`、`fixed` 或 `sticky`）时才有效。它定义了元素的堆叠上下文中的层级数字，数字越大，元素越靠前。

但需要注意，z-index 的比较只在同一堆叠上下文（stacking context）中有效。堆叠上下文是一个独立的层级环境，内部元素的 z-index 仅相对于该上下文内的元素有效。

## 堆叠上下文的影响

如果两个元素处于不同的堆叠上下文，即使一个元素的 z-index 是 999，另一个元素是 0，最终谁覆盖谁取决于它们所属的堆叠上下文的层级关系，而不是单纯的 z-index 数值。

新的堆叠上下文可以由某些 CSS 属性触发，如 `position` 与非 `auto` 的 `z-index`、`opacity` 小于 1、`transform` 等。

因此，一个 z-index 较小但处于更高堆叠上下文的元素，可能覆盖 z-index 较大的元素。

## 结论

z-index: 999 并不保证一定覆盖 z-index: 0 的元素，除非两者处于同一堆叠上下文。理解堆叠上下文的生成和层级关系，是正确使用 z-index 的关键。

## 面试回答

z-index 控制元素在堆叠上下文中的层级，数字越大元素越靠前。但 z-index 的比较只在同一堆叠上下文有效。如果两个元素不在同一个堆叠上下文，即使一个的 z-index 是 999，另一个是 0，也可能被覆盖或覆盖对方。因此 z-index: 999 不一定总是覆盖 z-index: 0。

## 总结

z-index 的生效不仅取决于数值大小，还取决于元素所属的堆叠上下文。深入理解堆叠上下文的概念，有助于避免层叠混乱，正确控制元素显示顺序。