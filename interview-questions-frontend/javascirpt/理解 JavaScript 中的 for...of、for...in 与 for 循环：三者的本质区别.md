# **理解 JavaScript 中的 for...of、for...in 与 for 循环：三者的本质区别**

# 前言

遍历是 JavaScript 中操作数据结构的重要手段，而 `for`、`for...in` 和 `for...of` 这三种循环语法虽然表面类似，实际使用中却有很大的区别。理解它们的异同，是写出高质量前端代码的基础，也是很多前端面试中经常考察的点。

# 正文

**一、for 循环：基础中的基础**

`for` 是最基础的循环语法，它依赖索引进行控制，适合数组、字符串等具备 length 属性的数据结构。它的语法形式如下：

```plain
for (let i = 0; i < arr.length; i++) {
  console.log(arr[i]);
}
```

这种方式执行效率高、可控性强，适合需要手动控制索引或中途中断循环的场景。但它不适合遍历对象，因为对象没有“下标”这一概念。

**二、for...in：用于遍历对象属性**

`for...in` 是专门用来遍历对象自身以及原型链上可枚举属性的语法。适用于对象，不推荐用于数组。

```plain
const obj = { a: 1, b: 2 };
for (let key in obj) {
  console.log(key, obj[key]);
}
```

需要注意几点：

- 它会枚举继承自原型链的属性
- 属性的顺序无法保证
- 如果用于数组，可能会遍历到非数字索引或自定义属性

因此 `for...in` 更适合遍历对象的键。

**三、for...of：用于遍历可迭代对象**

`for...of` 是 ES6 引入的新语法，用于遍历具有 `[Symbol.iterator]` 接口的可迭代对象，例如数组、字符串、Set、Map、arguments、NodeList 等。

```plain
const arr = [10, 20, 30];
for (let value of arr) {
  console.log(value);
}
```

相较于 `for`，它屏蔽了索引的细节；相较于 `for...in`，它只关注“值”，而不是“键”。

不可直接用于普通对象，除非为对象显式定义迭代器方法。

**四、一个实际示例对比**

```plain
const arr = ['a', 'b', 'c'];
arr.foo = 'bar';

for (let i = 0; i < arr.length; i++) {
  console.log(arr[i]); // 输出 a b c
}

for (let key in arr) {
  console.log(key); // 输出 0 1 2 foo
}

for (let value of arr) {
  console.log(value); // 输出 a b c
}
```

这个例子中我们给数组添加了一个自定义属性 `foo`，`for...in` 会遍历到这个属性，而 `for...of` 和普通 `for` 则不会。

# 面试回答

**问题：请你讲讲 for、for...in 和 for...of 的区别，分别适用于哪些场景？**

回答示范：

这三种循环语法在遍历结构上各有适用场景。for 是最原始的方式，适用于需要手动控制索引的情况，比如数组的部分遍历或反向遍历。for...in 更适合用于对象的属性遍历，它会枚举对象本身和继承的可枚举属性，但不适合数组，因为可能遍历出非预期的键。for...of 是用于遍历可迭代对象的，它自动跳过原型属性，也不包含手动添加的属性，更适合数组、Set、Map 等结构。如果是遍历数组中的值，推荐使用 for...of；如果需要键值对，Map 的 forEach 或 entries 配合 for...of 是更合适的方式。

# 总结

三种循环语法的差异体现在语义、适用数据结构以及行为细节上。理解它们背后的机制，不仅能帮助你写出更健壮的代码，也有助于在复杂项目中选择合适的遍历策略。面试中如果被问到这部分内容，除了讲清楚语法和场景，还可以补充一些你在实际项目中的应用细节，让你的回答更有说服力。