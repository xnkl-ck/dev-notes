# **什么是伪数组、什么是类数组**

## 前言

在学习 JavaScript 时，经常会遇到“伪数组”或“类数组”的说法，尤其是在处理 DOM 集合、函数参数时更是常见。这两个术语虽然常被交替使用，但它们的定义、使用场景和特性并不完全相同。理解这两个概念有助于我们在操作数据结构时避免误用或报错。

## 类数组的定义与特征

类数组（Array-like Object）指的是具有如下特征的对象：

- 拥有数字索引的键名（如 `"0"`, `"1"`）
- 拥有 `length` 属性
- 不具备数组的原型方法（如 `forEach`、`map` 等）

举个典型的例子：

```plain
const arrayLike = {
  0: 'a',
  1: 'b',
  2: 'c',
  length: 3
};
```

这个对象可以用下标访问元素，并具有 `length`，但它不是一个真正的数组，因此不能直接使用数组方法。

## 什么是伪数组？

“伪数组”是类数组的非官方叫法，主要用来形容那些表现像数组，但本质不是数组的对象。比如：

- `arguments` 对象
- DOM 方法返回的 NodeList
- 字符串（部分行为）
- `document.forms`、`HTMLCollection`

虽然术语不同，实质上“伪数组”是“类数组”的一种通俗说法。严格来说，所有伪数组都是类数组，但不是所有类数组都被称为伪数组。

## 伪数组和数组的差异

- 类型不同：数组是 `Array` 的实例，类数组不是
- 方法支持不同：数组拥有原型方法（如 `map`、`reduce`），类数组通常没有
- 可扩展性不同：数组可通过方法动态扩展，类数组行为受限

举例对比：

```plain
const arr = [1, 2, 3];
const arrayLike = { 0: 1, 1: 2, 2: 3, length: 3 };

console.log(arr instanceof Array); // true
console.log(arrayLike instanceof Array); // false
```

## 类数组的常见场景

1. `arguments`：函数内部访问传参
2. DOM 节点集合：如 `document.querySelectorAll()`
3. 字符串：可以通过索引访问字符，也有 `length`，但不是数组

## 面试回答

**问题：你了解类数组和伪数组吗？它们是什么，有什么区别？**

回答示范（口语化）：

这个问题其实蛮常见的，尤其在涉及 DOM 操作或函数参数时会被考到。简单来说，类数组就是那些看起来像数组的对象，它们有 `length` 属性、有数字索引，但其实不是 `Array` 的实例，所以不能直接用 `map`、`forEach` 等方法。

伪数组其实是类数组的俗称，比如说 `arguments`、NodeList、HTMLCollection 这些都属于伪数组。面试官有时候会特意问你知道 `arguments` 是数组吗，这时候就要明确说：不是，它是伪数组/类数组，不能直接用数组方法，需要转一下。

我平时处理类数组对象时，一般会用 `Array.from` 或者扩展运算符来转成真数组，比如：

```plain
const arr = Array.from(arguments);
// 或
const arr = [...arguments];
```

这样就能愉快地用各种数组方法了。

总的来说，如果一个对象有 `length` 和数字索引，那基本就可以算类数组了，但要注意它并不是数组本身，要用之前得确认一下是否需要转。

## 总结

类数组和伪数组在 JavaScript 中非常常见，虽然它们看起来像数组，但底层机制和行为上存在显著差异。理解它们的特性有助于我们在实际开发中避免误用和调试错误。遇到类数组时，推荐使用现代转换方法，如 `Array.from` 或扩展运算符，将其转化为真正的数组后再进行处理。