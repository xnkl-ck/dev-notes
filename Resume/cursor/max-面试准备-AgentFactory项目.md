# AgentFactory é¡¹ç›®é¢è¯•å‡†å¤‡æ–‡æ¡£

> **é¡¹ç›®å®šä½**ï¼šä¼ä¸šçº§ AI æ™ºèƒ½ä»£ç†ç®¡ç†å¹³å°ï¼ˆå¾®å‰ç«¯å­åº”ç”¨ï¼‰  
> **æŠ€æœ¯æ ˆ**ï¼šReact 18 + Vite + TypeScript + Redux Toolkit + Material-UI + ReactFlow + TailwindCSS + i18next + Wujie

---

## ç›®å½•
- [ä¸€ã€å¾®å‰ç«¯æ¶æ„é›†æˆ (Wujie)](#ä¸€å¾®å‰ç«¯æ¶æ„é›†æˆ-wujie)
- [äºŒã€å¤–éƒ¨è®¤è¯ç³»ç»Ÿé›†æˆ (SSO)](#äºŒå¤–éƒ¨è®¤è¯ç³»ç»Ÿé›†æˆ-sso)
- [ä¸‰ã€æ€§èƒ½ä¼˜åŒ– (æ„å»º)](#ä¸‰æ€§èƒ½ä¼˜åŒ–-æ„å»º)
- [å››ã€æ€§èƒ½ä¼˜åŒ– (åŠ è½½)](#å››æ€§èƒ½ä¼˜åŒ–-åŠ è½½)
- [äº”ã€æ€§èƒ½ä¼˜åŒ– (ç¼“å­˜)](#äº”æ€§èƒ½ä¼˜åŒ–-ç¼“å­˜)
- [å…­ã€å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨ (ReactFlow)](#å…­å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨-reactflow)
- [ä¸ƒã€å·¥ç¨‹åŒ– (Turbo monorepo)](#ä¸ƒå·¥ç¨‹åŒ–-turbo-monorepo)
- [å…«ã€ç»¼åˆé—®é¢˜](#å…«ç»¼åˆé—®é¢˜)

---

## ä¸€ã€å¾®å‰ç«¯æ¶æ„é›†æˆ (Wujie)

### ğŸ“Œ æŠ€æœ¯å®ç°ç»†èŠ‚

#### 1.1 ä¸ºä»€ä¹ˆé€‰æ‹© Wujieï¼Ÿ
- **WebComponent å®¹å™¨ + iframe æ²™ç®±**ï¼šå¤©ç„¶éš”ç¦» CSS å’Œ JS
- **å»ä¸­å¿ƒåŒ–é€šä¿¡**ï¼šä¸ä¾èµ–å…¨å±€çŠ¶æ€ï¼Œé€šè¿‡äº‹ä»¶æ€»çº¿å®ç°æ¾è€¦åˆ
- **ç”Ÿå‘½å‘¨æœŸå®Œæ•´**ï¼šæ”¯æŒé¢„åŠ è½½ã€ä¿æ´»æ¨¡å¼ã€é™çº§ç­–ç•¥
- **ä¸ qiankun å¯¹æ¯”**ï¼šWujie åœ¨æ ·å¼éš”ç¦»å’Œ vite å…¼å®¹æ€§ä¸Šæ›´ä¼˜

#### 1.2 äº‹ä»¶æ€»çº¿è®¾è®¡ï¼ˆ100ms å†…åŒæ­¥ï¼‰

**å®ç°æ¶æ„**ï¼š
```javascript
// ä¸»åº”ç”¨ï¼šå‘å¸ƒäº‹ä»¶
window.$wujie.bus.$emit('theme-change', { theme: 'dark' })
window.$wujie.bus.$emit('language-change', { lang: 'en' })
window.$wujie.bus.$emit('token-update', { token: 'xxx' })

// å­åº”ç”¨ï¼šç›‘å¬äº‹ä»¶
window.$wujie?.bus.$on('theme-change', ({ theme }) => {
  dispatch(setTheme(theme))
  applyThemeToDOM(theme)
})
```

**æ€§èƒ½ä¼˜åŒ–å…³é”®**ï¼š
- **é˜²æŠ–å¤„ç†**ï¼šä½¿ç”¨ `debounce(100ms)` é¿å…é¢‘ç¹è§¦å‘
- **æ‰¹é‡æ›´æ–°**ï¼šRedux Toolkit çš„ `batch()` åˆå¹¶å¤šæ¬¡ dispatch
- **ç¼“å­˜åŒæ­¥**ï¼šå°†çŠ¶æ€åŒæ­¥å†™å…¥ `localStorage`ï¼Œåˆ·æ–°åæ¢å¤

**æµ‹è¯•æ•°æ®**ï¼š
- äº‹ä»¶ä¼ é€’å»¶è¿Ÿï¼š< 50ms
- DOM æ›´æ–°å®Œæˆï¼š< 100ms
- ç”¨æˆ·æ— æ„ŸçŸ¥åˆ‡æ¢

#### 1.3 ç‹¬ç«‹/åµŒå…¥å¼éƒ¨ç½²å…¼å®¹

**æ ¸å¿ƒä»£ç **ï¼š
```javascript
// src/main.jsx
const isEmbedded = window.__POWERED_BY_WUJIE__

if (isEmbedded) {
  // åµŒå…¥æ¨¡å¼ï¼šæ¥æ”¶ä¸»åº”ç”¨é…ç½®
  const config = window.$wujie.props
  initAppWithConfig(config)
} else {
  // ç‹¬ç«‹æ¨¡å¼ï¼šä½¿ç”¨é»˜è®¤é…ç½®
  initAppStandalone()
}

// åŠ¨æ€è·¯ç”±å‰ç¼€
const basename = isEmbedded ? '/agent-factory' : '/'
```

**çµæ´»æ€§æå‡ 100%**ï¼šæŒ‡æ—¢èƒ½ç‹¬ç«‹è¿è¡Œï¼ˆhttp://localhost:3000ï¼‰ï¼Œä¹Ÿèƒ½åµŒå…¥ä¸»åº”ç”¨ï¼ˆç»Ÿä¸€å…¥å£ï¼‰

---

### ğŸ¯ é«˜é¢‘é¢è¯•é—®é¢˜ï¼ˆSTAR æ³•åˆ™ï¼‰

#### Q1: å¾®å‰ç«¯æ¶æ„ä¸­å¦‚ä½•ä¿è¯ä¸»å­åº”ç”¨é€šä¿¡çš„å¯é æ€§ï¼Ÿ

**S (Situation)**ï¼š  
åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œä¸»åº”ç”¨å’Œ AgentFactory å­åº”ç”¨éœ€è¦å®æ—¶åŒæ­¥ä¸»é¢˜ã€è¯­è¨€ã€Token ç­‰çŠ¶æ€ï¼Œä½†ç›´æ¥é€šä¿¡å­˜åœ¨è€¦åˆé£é™©ã€‚

**T (Task)**ï¼š  
è®¾è®¡ä¸€å¥—å¯é çš„é€šä¿¡æœºåˆ¶ï¼Œä¿è¯æ•°æ®åŒæ­¥çš„å®æ—¶æ€§ï¼ˆ< 100msï¼‰å’Œå®¹é”™æ€§ã€‚

**A (Action)**ï¼š  
1. **äº‹ä»¶æ€»çº¿ + å‘å¸ƒè®¢é˜…æ¨¡å¼**ï¼šä½¿ç”¨ Wujie çš„ `bus.$emit / $on` è§£è€¦
2. **å¿ƒè·³æ£€æµ‹**ï¼šå­åº”ç”¨æ¯ 30s å‘ä¸»åº”ç”¨å‘é€å¿ƒè·³ï¼Œç¡®è®¤è¿æ¥çŠ¶æ€
3. **é™çº§ç­–ç•¥**ï¼šé€šä¿¡å¤±è´¥æ—¶ä» `localStorage` è¯»å–ç¼“å­˜é…ç½®
4. **TypeScript ç±»å‹çº¦æŸ**ï¼šå®šä¹‰äº‹ä»¶æ¥å£ï¼Œç¼–è¯‘æ—¶æ£€æŸ¥å‚æ•°ç±»å‹

**R (Result)**ï¼š  
- çŠ¶æ€åŒæ­¥å»¶è¿Ÿ < 100ms
- å¼‚å¸¸åœºæ™¯ä¸‹è‡ªåŠ¨é™çº§ï¼Œå¯ç”¨æ€§ 99.8%
- å‡å°‘ 70% çš„é€šä¿¡è°ƒè¯•æ—¶é—´

---

#### Q2: ç‹¬ç«‹éƒ¨ç½²å’ŒåµŒå…¥å¼éƒ¨ç½²çš„å·®å¼‚å¦‚ä½•å¤„ç†ï¼Ÿ

**S**ï¼šå­åº”ç”¨éœ€è¦æ”¯æŒä¸¤ç§è¿è¡Œæ¨¡å¼ï¼Œä½†è·¯ç”±ã€è®¤è¯ã€ç¯å¢ƒå˜é‡é…ç½®ä¸åŒã€‚

**T**ï¼šå®ç°ä¸€å¥—ä»£ç ï¼Œå…¼å®¹ä¸¤ç§éƒ¨ç½²æ–¹å¼ã€‚

**A**ï¼š
1. **ç¯å¢ƒæ£€æµ‹**ï¼šé€šè¿‡ `window.__POWERED_BY_WUJIE__` åˆ¤æ–­è¿è¡Œæ¨¡å¼
2. **é…ç½®æŠ½è±¡**ï¼šåˆ›å»º `ConfigProvider`ï¼Œæ ¹æ®æ¨¡å¼åŠ¨æ€æ³¨å…¥é…ç½®
3. **è·¯ç”±é€‚é…**ï¼šåµŒå…¥å¼ä½¿ç”¨ basenameï¼Œç‹¬ç«‹å¼ä½¿ç”¨æ ¹è·¯å¾„
4. **è®¤è¯åˆ‡æ¢**ï¼šåµŒå…¥å¼ä½¿ç”¨ SSO Tokenï¼Œç‹¬ç«‹å¼ä½¿ç”¨æœ¬åœ°ç™»å½•

**R**ï¼š
- çµæ´»æ€§æå‡ 100%ï¼ˆå¯ä»¥ä»»æ„åˆ‡æ¢æ¨¡å¼ï¼‰
- å‡å°‘ 50% çš„ç¯å¢ƒé…ç½®å·¥ä½œé‡

---

### ğŸ”§ æŠ€æœ¯æ·±åº¦é—®é¢˜

#### Q3: Wujie çš„ iframe æ²™ç®±å’Œ qiankun çš„ JS æ²™ç®±æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**Wujie**ï¼š
- ä½¿ç”¨ **WebComponent + iframe** å®ç°åŒé‡éš”ç¦»
- JS è¿è¡Œåœ¨ iframe ä¸­ï¼ŒDOM æ¸²æŸ“åœ¨ WebComponent ä¸­
- **ä¼˜åŠ¿**ï¼šæ ·å¼éš”ç¦»å½»åº•ï¼Œæ— éœ€ CSS Scope æ–¹æ¡ˆ
- **åŠ£åŠ¿**ï¼šiframe é€šä¿¡æœ‰æ€§èƒ½å¼€é”€ï¼ˆé€šè¿‡ä»£ç†ä¼˜åŒ–ï¼‰

**qiankun**ï¼š
- ä½¿ç”¨ **Proxy æ²™ç®±**æ‹¦æˆª `window` å¯¹è±¡
- CSS é€šè¿‡ Shadow DOM æˆ– scoped æ ·å¼éš”ç¦»
- **ä¼˜åŠ¿**ï¼šè½»é‡çº§ï¼Œæ— é¢å¤–å®¹å™¨
- **åŠ£åŠ¿**ï¼šæ ·å¼éš”ç¦»ä¸å½»åº•ï¼ˆç¬¬ä¸‰æ–¹åº“å¯èƒ½å†²çªï¼‰

**é€‰æ‹© Wujie çš„åŸå› **ï¼šé¡¹ç›®ä½¿ç”¨ Vite + Material-UIï¼Œå…¨å±€æ ·å¼å¤šï¼ŒWujie çš„éš”ç¦»æ›´å®‰å…¨ã€‚

---

#### Q4: å¦‚ä½•è§£å†³å¾®å‰ç«¯ä¸­çš„ä¾èµ–å†²çªï¼ˆå¦‚ React ç‰ˆæœ¬ä¸ä¸€è‡´ï¼‰ï¼Ÿ

**é—®é¢˜åœºæ™¯**ï¼šä¸»åº”ç”¨ React 17ï¼Œå­åº”ç”¨ React 18ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **ä¾èµ–å¤–éƒ¨åŒ–ï¼ˆæ¨èï¼‰**ï¼šå­åº”ç”¨ä½¿ç”¨ä¸»åº”ç”¨çš„ React
   ```javascript
   // vite.config.js
   build: {
     rollupOptions: {
       external: ['react', 'react-dom']
     }
   }
   ```
2. **ç‹¬ç«‹æ‰“åŒ…ï¼ˆå½“å‰æ–¹æ¡ˆï¼‰**ï¼šå­åº”ç”¨æ‰“åŒ…è‡ªå·±çš„ Reactï¼Œé€šè¿‡ iframe éš”ç¦»
3. **Module Federation**ï¼šWebpack 5 çš„å…±äº«ä¾èµ–æ–¹æ¡ˆ

**å®é™…é€‰æ‹©**ï¼šç‹¬ç«‹æ‰“åŒ…ï¼Œå› ä¸º Wujie å¤©ç„¶éš”ç¦»ï¼Œæ— å†²çªé£é™©ã€‚

---

## äºŒã€å¤–éƒ¨è®¤è¯ç³»ç»Ÿé›†æˆ (SSO)

### ğŸ“Œ æŠ€æœ¯å®ç°ç»†èŠ‚

#### 2.1 SSO è®¤è¯æµç¨‹

```
1. ç”¨æˆ·è®¿é—®ä¸»åº”ç”¨ â†’ ä¸»åº”ç”¨ç™»å½• â†’ è·å– JWT Token
2. ä¸»åº”ç”¨åŠ è½½å­åº”ç”¨æ—¶ï¼Œé€šè¿‡ props ä¼ é€’ Token
3. å­åº”ç”¨æ¥æ”¶ Tokenï¼Œè°ƒç”¨åç«¯ `/api/verify` éªŒè¯
4. éªŒè¯æˆåŠŸï¼šä¿å­˜ Tokenï¼Œè·³è½¬é¦–é¡µ
5. éªŒè¯å¤±è´¥ï¼šè·³è½¬ä¸»åº”ç”¨ç™»å½•é¡µ
```

**æ ¸å¿ƒä»£ç **ï¼š
```javascript
// å­åº”ç”¨å¯åŠ¨æ—¶
const token = window.$wujie?.props?.token || getTokenFromStorage()

if (token) {
  const isValid = await api.verifyToken(token)
  if (isValid) {
    store.dispatch(setAuth({ token, user: decodedUser }))
    axios.defaults.headers['Authorization'] = `Bearer ${token}`
  } else {
    redirectToMainLogin()
  }
}
```

#### 2.2 Token åˆ·æ–°æœºåˆ¶

**é—®é¢˜**ï¼šJWT è¿‡æœŸåå¦‚ä½•æ— æ„Ÿåˆ·æ–°ï¼Ÿ

**æ–¹æ¡ˆ**ï¼š
1. **æ‹¦æˆªå™¨æ£€æµ‹ 401**ï¼šAxios å“åº”æ‹¦æˆªå™¨æ•è·è¿‡æœŸé”™è¯¯
2. **è‡ªåŠ¨åˆ·æ–°**ï¼šè°ƒç”¨ä¸»åº”ç”¨çš„ `refreshToken` æ¥å£
3. **é‡è¯•è¯·æ±‚**ï¼šåˆ·æ–°æˆåŠŸåé‡æ”¾å¤±è´¥çš„è¯·æ±‚
4. **é˜²å¹¶å‘**ï¼šä½¿ç”¨ Promise é˜Ÿåˆ—ï¼Œé¿å…å¤šä¸ªè¯·æ±‚åŒæ—¶åˆ·æ–°

```javascript
axios.interceptors.response.use(null, async (error) => {
  if (error.response?.status === 401 && !error.config._retry) {
    error.config._retry = true
    const newToken = await refreshTokenFromMain()
    error.config.headers['Authorization'] = `Bearer ${newToken}`
    return axios(error.config)
  }
  return Promise.reject(error)
})
```

#### 2.3 è®¤è¯æˆåŠŸç‡ 99.8% çš„ä¿éšœ

**ç›‘æ§æŒ‡æ ‡**ï¼š
- Token éªŒè¯æˆåŠŸç‡ï¼š99.8%
- å¹³å‡å“åº”æ—¶é—´ï¼š< 200ms
- åˆ·æ–°å¤±è´¥ç‡ï¼š< 0.2%

**å®¹é”™æªæ–½**ï¼š
- **é™çº§ç™»å½•**ï¼šSSO å¤±è´¥æ—¶ï¼Œå›é€€åˆ°æœ¬åœ°ç™»å½•
- **é”™è¯¯é‡è¯•**ï¼šç½‘ç»œå¤±è´¥è‡ªåŠ¨é‡è¯• 3 æ¬¡ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
- **æ—¥å¿—ä¸ŠæŠ¥**ï¼šè®°å½•æ‰€æœ‰è®¤è¯å¤±è´¥äº‹ä»¶ï¼Œå®šä½é—®é¢˜

---

### ğŸ¯ é«˜é¢‘é¢è¯•é—®é¢˜ï¼ˆSTAR æ³•åˆ™ï¼‰

#### Q5: SSO å•ç‚¹ç™»å½•çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ

**S**ï¼šå¤šä¸ªç³»ç»Ÿéœ€è¦å…±äº«ç™»å½•çŠ¶æ€ï¼Œé¿å…é‡å¤ç™»å½•ã€‚

**T**ï¼šå®ç°å­åº”ç”¨è‡ªåŠ¨ç»§æ‰¿ä¸»åº”ç”¨çš„ç™»å½•æ€ã€‚

**A**ï¼š
1. **ç»Ÿä¸€è®¤è¯ä¸­å¿ƒ**ï¼šä¸»åº”ç”¨ä½œä¸ºè®¤è¯æ–¹ï¼Œé¢å‘ JWT Token
2. **Token ä¼ é€’**ï¼šé€šè¿‡ Wujie çš„ `props` æˆ– URL å‚æ•°ä¼ é€’
3. **åç«¯éªŒè¯**ï¼šå­åº”ç”¨è°ƒç”¨ä¸»åº”ç”¨æ¥å£éªŒè¯ Token æœ‰æ•ˆæ€§
4. **çŠ¶æ€åŒæ­¥**ï¼šéªŒè¯æˆåŠŸåï¼Œå­åº”ç”¨ä¿å­˜ Token å’Œç”¨æˆ·ä¿¡æ¯

**R**ï¼š
- ç”¨æˆ·æ— éœ€äºŒæ¬¡ç™»å½•ï¼Œä½“éªŒæµç•…
- è®¤è¯æˆåŠŸç‡è¾¾ 99.8%

---

#### Q6: JWT Token å­˜å‚¨åœ¨å“ªé‡Œï¼Ÿæœ‰ä»€ä¹ˆå®‰å…¨é£é™©ï¼Ÿ

**å­˜å‚¨æ–¹æ¡ˆå¯¹æ¯”**ï¼š

| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | æ˜¯å¦é‡‡ç”¨ |
|------|------|------|----------|
| **localStorage** | æŒä¹…åŒ–ï¼Œåˆ·æ–°ä¸ä¸¢å¤± | æ˜“å— XSS æ”»å‡» | âœ… é‡‡ç”¨ |
| **sessionStorage** | æ ‡ç­¾é¡µéš”ç¦» | åˆ·æ–°åéœ€é‡æ–°ç™»å½• | âŒ |
| **Cookie (httpOnly)** | é˜² XSS | ä¸èƒ½è¢« JS è¯»å–ï¼Œä¸é€‚åˆå‰åç«¯åˆ†ç¦» | âŒ |
| **å†…å­˜** | æœ€å®‰å…¨ | åˆ·æ–°åä¸¢å¤± | è¾…åŠ©ä½¿ç”¨ |

**å®é™…æ–¹æ¡ˆ**ï¼š
- **ä¸»å­˜å‚¨**ï¼š`localStorage`ï¼ˆæ–¹ä¾¿åˆ·æ–°æ¢å¤ï¼‰
- **å†…å­˜ç¼“å­˜**ï¼šRedux Storeï¼ˆè¿è¡Œæ—¶å¿«é€Ÿè®¿é—®ï¼‰
- **å®‰å…¨æªæ–½**ï¼š
  - è®¾ç½® Token è¿‡æœŸæ—¶é—´ï¼ˆ2 å°æ—¶ï¼‰
  - å¯ç”¨ CSP (Content Security Policy) é˜² XSS
  - æ•æ„Ÿæ“ä½œäºŒæ¬¡éªŒè¯

---

### ğŸ”§ æŠ€æœ¯æ·±åº¦é—®é¢˜

#### Q7: Token è¿‡æœŸåå¦‚ä½•æ— æ„Ÿåˆ·æ–°ï¼Ÿé‡åˆ°å¹¶å‘è¯·æ±‚æ€ä¹ˆåŠï¼Ÿ

**é—®é¢˜åœºæ™¯**ï¼šç”¨æˆ·åŒæ—¶å‘èµ· 10 ä¸ªè¯·æ±‚ï¼ŒToken åˆšå¥½è¿‡æœŸã€‚

**é”™è¯¯æ–¹æ¡ˆ**ï¼šæ¯ä¸ªè¯·æ±‚éƒ½è§¦å‘åˆ·æ–° â†’ åç«¯æ”¶åˆ° 10 æ¬¡åˆ·æ–°è¯·æ±‚ â†’ æµªè´¹èµ„æº

**æ­£ç¡®æ–¹æ¡ˆï¼ˆPromise é˜Ÿåˆ—ï¼‰**ï¼š
```javascript
let refreshPromise = null

async function refreshToken() {
  if (!refreshPromise) {
    refreshPromise = api.refreshToken().finally(() => {
      refreshPromise = null
    })
  }
  return refreshPromise
}

// æ‹¦æˆªå™¨ä¸­ä½¿ç”¨
const newToken = await refreshToken() // å¤šä¸ªè¯·æ±‚å¤ç”¨åŒä¸€ä¸ª Promise
```

**æ•ˆæœ**ï¼š10 ä¸ªå¹¶å‘è¯·æ±‚ï¼Œåªåˆ·æ–° 1 æ¬¡ Tokenã€‚

---

## ä¸‰ã€æ€§èƒ½ä¼˜åŒ– (æ„å»º)

### ğŸ“Œ æŠ€æœ¯å®ç°ç»†èŠ‚

#### 3.1 é—®é¢˜èƒŒæ™¯ï¼š"æ•°åƒä¸ª HTTP è¯·æ±‚"

**åˆå§‹çŠ¶æ€**ï¼š
- é¦–å±åŠ è½½ï¼š**3000+ HTTP è¯·æ±‚**
- åŠ è½½æ—¶é—´ï¼š8-10 ç§’
- ç€‘å¸ƒå›¾ï¼šå¤§é‡å°æ–‡ä»¶è¯·æ±‚é˜»å¡

**åŸå› åˆ†æ**ï¼š
1. **Vite å¼€å‘æ¨¡å¼ç‰¹æ€§**ï¼šæŒ‰éœ€åŠ è½½æ¨¡å—ï¼Œæ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªè¯·æ±‚
2. **ä¾èµ–æœªé¢„æ„å»º**ï¼šç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ lodashï¼‰æ¯ä¸ªå­æ¨¡å—éƒ½å‘è¯·æ±‚
3. **åŠ¨æ€å¯¼å…¥æ»¥ç”¨**ï¼šè¿‡å¤šçš„ `import()` æ‹†åˆ†ä»£ç 

#### 3.2 è§£å†³æ–¹æ¡ˆï¼šæ™ºèƒ½ä»£ç åˆ†å‰²

**ç­–ç•¥ 1ï¼šä¾èµ–é¢„æ„å»º**
```javascript
// vite.config.js
optimizeDeps: {
  include: [
    'react', 'react-dom', 'react-router-dom',
    'lodash', 'axios', '@mui/material',
    'reactflow' // å¤§å‹åº“å¼ºåˆ¶é¢„æ„å»º
  ]
}
```

**ç­–ç•¥ 2ï¼šæ‰‹åŠ¨åˆ†åŒ…ï¼ˆsplitChunksï¼‰**
```javascript
build: {
  rollupOptions: {
    output: {
      manualChunks: {
        'vendor-react': ['react', 'react-dom', 'react-router-dom'],
        'vendor-ui': ['@mui/material', '@mui/icons-material'],
        'vendor-flow': ['reactflow'],
        'vendor-utils': ['lodash', 'axios', 'dayjs']
      }
    }
  }
}
```

**ç­–ç•¥ 3ï¼šè·¯ç”±æ‡’åŠ è½½**
```javascript
const FlowEditor = lazy(() => import('./pages/FlowEditor'))
const Dashboard = lazy(() => import('./pages/Dashboard'))
```

**ç­–ç•¥ 4ï¼šå¼‚æ­¥ç»„ä»¶åˆå¹¶**
- åŸæ–¹æ¡ˆï¼š10 ä¸ªå¼¹çª—ç»„ä»¶ï¼Œ10 ä¸ª chunk
- ä¼˜åŒ–åï¼šåˆå¹¶ä¸º `dialogs.js` ä¸€ä¸ª chunk

#### 3.3 ä¼˜åŒ–ç»“æœ

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| HTTP è¯·æ±‚æ•° | 3000+ | 20-30 | **90%+** |
| é¦–å±åŠ è½½æ—¶é—´ | 8-10s | 3-4s | **60%** |
| Bundle å¤§å° | 5MB | 3MB | **40%** |

---

### ğŸ¯ é«˜é¢‘é¢è¯•é—®é¢˜ï¼ˆSTAR æ³•åˆ™ï¼‰

#### Q8: å¦‚ä½•å®šä½"æ•°åƒä¸ª HTTP è¯·æ±‚"çš„é—®é¢˜ï¼Ÿ

**S**ï¼šç”¨æˆ·åé¦ˆé¦–å±åŠ è½½æ…¢ï¼Œæ‰“å¼€ DevTools å‘ç° 3000+ è¯·æ±‚ã€‚

**T**ï¼šå®šä½è¯·æ±‚æ¥æºï¼Œä¼˜åŒ–åˆ°åˆç†èŒƒå›´ï¼ˆ< 50 ä¸ªï¼‰ã€‚

**A**ï¼š
1. **Network é¢æ¿åˆ†æ**ï¼šæŒ‰ç±»å‹åˆ†ç»„ï¼Œå‘ç°å¤§é‡ `.js` æ–‡ä»¶
2. **Vite æ—¥å¿—æ£€æŸ¥**ï¼šå¼€å¯ `debug` æ¨¡å¼ï¼ŒæŸ¥çœ‹æ¨¡å—åŠ è½½è·¯å¾„
3. **Bundle åˆ†æ**ï¼šä½¿ç”¨ `rollup-plugin-visualizer` ç”Ÿæˆä¾èµ–å›¾
4. **å®šä½æ ¹å› **ï¼šå‘ç° `lodash` æœªé¢„æ„å»ºï¼Œæ¯ä¸ªå‡½æ•°ä¸€ä¸ªè¯·æ±‚

**R**ï¼š
- å°† lodash åŠ å…¥ `optimizeDeps.include`
- è¯·æ±‚æ•°ä» 3000+ é™è‡³ 30 å·¦å³
- åŠ è½½æ—¶é—´ç¼©çŸ­ 60%

---

#### Q9: Vite çš„ä»£ç åˆ†å‰²å’Œ Webpack æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**Webpack**ï¼š
- åŸºäº `splitChunks` é…ç½®ï¼Œé™æ€åˆ†æä¾èµ–å…³ç³»
- æ‰“åŒ…æ—¶ç”Ÿæˆå›ºå®šçš„ chunk
- éœ€è¦æ‰‹åŠ¨é…ç½® cacheGroups

**Vite**ï¼š
- **å¼€å‘æ¨¡å¼**ï¼šESM åŸç”ŸåŠ è½½ï¼ŒæŒ‰éœ€è¯·æ±‚ï¼ˆå¯¼è‡´è¯·æ±‚å¤šï¼‰
- **ç”Ÿäº§æ¨¡å¼**ï¼šåŸºäº Rollupï¼Œè‡ªåŠ¨åˆ†å‰²åŠ¨æ€å¯¼å…¥
- æ›´æ™ºèƒ½çš„ Tree Shaking

**ä¼˜åŒ–å…³é”®**ï¼š
- Vite éœ€è¦æ˜¾å¼é…ç½® `manualChunks`ï¼Œå¦åˆ™ä¼šæ‹†åˆ†è¿‡ç»†
- Webpack éœ€è¦è°ƒæ•´ `minSize / maxSize` æ§åˆ¶ chunk å¤§å°

---

### ğŸ”§ æŠ€æœ¯æ·±åº¦é—®é¢˜

#### Q10: å¦‚ä½•å¹³è¡¡ä»£ç åˆ†å‰²çš„ç²’åº¦ï¼Ÿ

**è¿‡åº¦æ‹†åˆ†**ï¼š
- chunk æ•°é‡å¤š â†’ HTTP è¯·æ±‚å¤š â†’ å¹¶å‘é™åˆ¶ï¼ˆChrome æœ€å¤š 6 ä¸ªï¼‰
- æ¯ä¸ª chunk éƒ½æœ‰å¼€é”€ï¼ˆgzip headerï¼‰

**æ‹†åˆ†ä¸è¶³**ï¼š
- å•ä¸ª chunk å¤ªå¤§ â†’ é¦–å±åŠ è½½æ…¢
- æ”¹ä¸€è¡Œä»£ç  â†’ æ•´ä¸ª chunk ç¼“å­˜å¤±æ•ˆ

**æœ€ä½³å®è·µ**ï¼š
1. **åŸºç¡€åº“**ï¼šReact/Vue å•ç‹¬æ‰“åŒ…ï¼ˆå˜åŒ–å°‘ï¼Œé•¿æœŸç¼“å­˜ï¼‰
2. **UI åº“**ï¼šMaterial-UI å•ç‹¬æ‰“åŒ…ï¼ˆä½“ç§¯å¤§ï¼‰
3. **ä¸šåŠ¡ä»£ç **ï¼šæŒ‰è·¯ç”±æ‹†åˆ†ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
4. **å·¥å…·åº“**ï¼šlodash/dayjs åˆå¹¶ä¸ºä¸€ä¸ª chunk

**ç›®æ ‡**ï¼š
- å•ä¸ª chunk å¤§å°ï¼š50KB - 200KB
- æ€» chunk æ•°é‡ï¼š< 20 ä¸ª
- é¦–å±å…³é”® chunkï¼š< 3 ä¸ª

---

## å››ã€æ€§èƒ½ä¼˜åŒ– (åŠ è½½)

### ğŸ“Œ æŠ€æœ¯å®ç°ç»†èŠ‚

#### 4.1 ä¾èµ–é¢„æ„å»º

**åŸç†**ï¼šVite é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œå°† CommonJS/UMD ä¾èµ–è½¬ä¸º ESMï¼Œå¹¶æ‰“åŒ…æˆå•æ–‡ä»¶ã€‚

**é…ç½®ä¼˜åŒ–**ï¼š
```javascript
optimizeDeps: {
  include: [
    // å¼ºåˆ¶é¢„æ„å»ºçš„åº“
    'lodash', 'axios', '@mui/material'
  ],
  exclude: [
    // å·²ç»æ˜¯ ESM çš„åº“ï¼Œè·³è¿‡æ„å»º
    'some-esm-package'
  ]
}
```

**æ•ˆæœ**ï¼šé¦–æ¬¡åŠ è½½æ—¶é—´ä» 5s é™è‡³ 2sã€‚

#### 4.2 èµ„æºå†…è”ï¼ˆ< 4KBï¼‰

**ç­–ç•¥**ï¼šå°æ–‡ä»¶ç›´æ¥ base64 å†…è”ï¼Œå‡å°‘ HTTP è¯·æ±‚ã€‚

```javascript
build: {
  assetsInlineLimit: 4096 // 4KB ä»¥ä¸‹çš„æ–‡ä»¶å†…è”
}
```

**å®é™…åœºæ™¯**ï¼š
- å°å›¾æ ‡ (logo.png, 3KB) â†’ å†…è”
- å¤§å›¾ç‰‡ (banner.jpg, 100KB) â†’ å•ç‹¬è¯·æ±‚

#### 4.3 Terser å‹ç¼©

**å¯¹æ¯” esbuild**ï¼š
- esbuildï¼šé€Ÿåº¦å¿«ï¼ˆ10xï¼‰ï¼Œä½†å‹ç¼©ç‡ä½
- Terserï¼šé€Ÿåº¦æ…¢ï¼Œä½†å‹ç¼©ç‡é«˜ï¼ˆé¢å¤– 5-10%ï¼‰

**é…ç½®**ï¼š
```javascript
build: {
  minify: 'terser',
  terserOptions: {
    compress: {
      drop_console: true, // åˆ é™¤ console.log
      drop_debugger: true
    }
  }
}
```

**æƒè¡¡**ï¼šç”Ÿäº§ç¯å¢ƒç”¨ Terserï¼Œå¼€å‘ç¯å¢ƒç”¨ esbuildã€‚

#### 4.4 ä¼˜åŒ–ç»“æœ

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| é¦–å±åŠ è½½æ—¶é—´ | 6s | 2.5s | **58%** |
| Bundle å¤§å° | 5MB | 3MB | **40%** |
| Gzip åå¤§å° | 1.5MB | 900KB | **40%** |

---

### ğŸ¯ é«˜é¢‘é¢è¯•é—®é¢˜ï¼ˆSTAR æ³•åˆ™ï¼‰

#### Q11: å¦‚ä½•åˆ†æé¦–å±åŠ è½½æ€§èƒ½ç“¶é¢ˆ?

**S**ï¼šé¦–å±åŠ è½½ 6 ç§’ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚

**T**ï¼šå®šä½ç“¶é¢ˆï¼Œä¼˜åŒ–è‡³ 3 ç§’ä»¥å†…ã€‚

**A**ï¼š
1. **Lighthouse åˆ†æ**ï¼šFCP 4sï¼ŒLCP 6sï¼ˆä¸»è¦ç“¶é¢ˆï¼‰
2. **Network ç€‘å¸ƒå›¾**ï¼šå‘ç° `vendor.js` (2MB) é˜»å¡æ¸²æŸ“
3. **Bundle Analyzer**ï¼šå‘ç° Moment.js æ‰“åŒ…äº†æ‰€æœ‰è¯­è¨€åŒ…
4. **ä¼˜åŒ–æªæ–½**ï¼š
   - æ›¿æ¢ Moment.js ä¸º Day.jsï¼ˆä½“ç§¯å‡å°‘ 90%ï¼‰
   - åŠ¨æ€å¯¼å…¥éé¦–å±ç»„ä»¶
   - å¯ç”¨ Gzip å‹ç¼©

**R**ï¼š
- é¦–å±åŠ è½½æ—¶é—´é™è‡³ 2.5s
- LCP æŒ‡æ ‡ä» 6s é™è‡³ 2.8s

---

#### Q12: Gzip å‹ç¼©åœ¨å“ªä¸€å±‚å¤„ç†ï¼Ÿå‰ç«¯è¿˜æ˜¯åç«¯ï¼Ÿ

**ç­”æ¡ˆ**ï¼šåç«¯ï¼ˆNginxï¼‰å¤„ç†ï¼Œä½†å‰ç«¯éœ€è¦é…åˆã€‚

**å‰ç«¯èŒè´£**ï¼š
- ç”Ÿæˆ `.gz` æ–‡ä»¶ï¼ˆé¢„å‹ç¼©ï¼‰
  ```javascript
  import viteCompression from 'vite-plugin-compression'
  
  plugins: [
    viteCompression({ algorithm: 'gzip' })
  ]
  ```

**åç«¯èŒè´£**ï¼š
- Nginx é…ç½®è¿”å› `.gz` æ–‡ä»¶
  ```nginx
  gzip_static on;
  gzip_types text/javascript application/javascript;
  ```

**ä¼˜åŠ¿**ï¼š
- é¢„å‹ç¼©ï¼šæ„å»ºæ—¶å®Œæˆï¼Œè¿è¡Œæ—¶æ—  CPU å¼€é”€
- å‹ç¼©ç‡ï¼š3MB â†’ 900KBï¼ˆ70% å‡å°‘ï¼‰

---

### ğŸ”§ æŠ€æœ¯æ·±åº¦é—®é¢˜

#### Q13: Tree Shaking å¤±æ•ˆçš„å¸¸è§åŸå› ï¼Ÿ

**é—®é¢˜åœºæ™¯**ï¼šæ˜æ˜æ²¡ç”¨çš„ä»£ç ï¼Œå´è¢«æ‰“åŒ…è¿› bundleã€‚

**å¤±æ•ˆåŸå› **ï¼š
1. **CommonJS å¯¼å‡º**ï¼š`module.exports = {}` æ— æ³•é™æ€åˆ†æ
   ```javascript
   // âŒ æ— æ³• Tree Shaking
   const utils = require('./utils')
   
   // âœ… å¯ä»¥ Tree Shaking
   import { debounce } from './utils'
   ```

2. **å‰¯ä½œç”¨ä»£ç **ï¼šæ¨¡å—é¡¶å±‚æœ‰æ‰§è¡Œä»£ç 
   ```javascript
   // utils.js
   console.log('Module loaded') // å‰¯ä½œç”¨ â†’ æ— æ³•åˆ é™¤
   export const add = (a, b) => a + b
   ```

3. **æœªæ ‡è®° sideEffects**ï¼š
   ```json
   // package.json
   "sideEffects": false // å‘Šè¯‰æ‰“åŒ…å·¥å…·ï¼šæ— å‰¯ä½œç”¨ï¼Œå¯ä»¥åˆ é™¤
   ```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ ESM å¯¼å…¥
- åœ¨ `package.json` æ ‡è®° `sideEffects`
- é¿å…æ¨¡å—é¡¶å±‚æœ‰å‰¯ä½œç”¨ä»£ç 

---

## äº”ã€æ€§èƒ½ä¼˜åŒ– (ç¼“å­˜)

### ğŸ“Œ æŠ€æœ¯å®ç°ç»†èŠ‚

#### 5.1 é•¿æœŸç¼“å­˜ç­–ç•¥ï¼ˆ1 å¹´ï¼‰

**æ ¸å¿ƒåŸç†**ï¼šæ–‡ä»¶å hash åŒ–ï¼Œå†…å®¹å˜åŒ–æ‰æ›´æ–°ã€‚

**Vite é…ç½®**ï¼š
```javascript
build: {
  rollupOptions: {
    output: {
      // JS æ–‡ä»¶ï¼šcontenthashï¼ˆå†…å®¹å˜åŒ–æ‰æ”¹å˜ï¼‰
      entryFileNames: 'assets/[name].[hash].js',
      chunkFileNames: 'assets/[name].[hash].js',
      
      // CSS æ–‡ä»¶
      assetFileNames: 'assets/[name].[hash].[ext]'
    }
  }
}
```

**Nginx é…ç½®**ï¼š
```nginx
location ~* \.(js|css|png|jpg)$ {
  expires 1y;
  add_header Cache-Control "public, immutable";
}

location = /index.html {
  add_header Cache-Control "no-cache"; # HTML æ¯æ¬¡éƒ½éªŒè¯
}
```

**å…³é”®ç‚¹**ï¼š
- **é™æ€èµ„æº**ï¼š`Cache-Control: max-age=31536000, immutable`ï¼ˆ1 å¹´ï¼‰
- **HTML æ–‡ä»¶**ï¼š`Cache-Control: no-cache`ï¼ˆæ¯æ¬¡éªŒè¯ï¼‰

#### 5.2 ç¼“å­˜å‘½ä¸­ç‡ 85%

**ç›‘æ§æ–¹å¼**ï¼š
- Nginx æ—¥å¿—ç»Ÿè®¡ï¼š`$upstream_cache_status`
- CDN æ§åˆ¶å°ï¼šæŸ¥çœ‹ HIT/MISS æ¯”ä¾‹

**æå‡ç­–ç•¥**ï¼š
1. **é¢„åŠ è½½å…³é”®èµ„æº**ï¼š
   ```html
   <link rel="preload" href="/vendor.js" as="script">
   ```
2. **Service Worker ç¼“å­˜**ï¼šç¦»çº¿è®¿é—®
3. **CDN åˆ†å‘**ï¼šå…¨çƒåŠ é€Ÿ

#### 5.3 ç¼“å­˜æ›´æ–°ç­–ç•¥

**é—®é¢˜**ï¼šå‘å¸ƒæ–°ç‰ˆæœ¬åï¼Œç”¨æˆ·æµè§ˆå™¨ä»åŠ è½½æ—§æ–‡ä»¶ã€‚

**æ–¹æ¡ˆ**ï¼š
1. **HTML ä¸ç¼“å­˜**ï¼šæ¯æ¬¡è¯·æ±‚éƒ½è·å–æœ€æ–°çš„ `index.html`
2. **JS/CSS æ–‡ä»¶åå¸¦ hash**ï¼šå†…å®¹å˜åŒ– â†’ æ–‡ä»¶åå˜åŒ– â†’ æµè§ˆå™¨è¯·æ±‚æ–°æ–‡ä»¶
3. **è‡ªåŠ¨æ›´æ–°æ£€æµ‹**ï¼š
   ```javascript
   // è½®è¯¢æ£€æŸ¥ç‰ˆæœ¬
   setInterval(() => {
     fetch('/version.json').then(res => {
       if (res.version !== currentVersion) {
         showUpdateTip() // æç¤ºç”¨æˆ·åˆ·æ–°
       }
     })
   }, 5 * 60 * 1000) // 5 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
   ```

---

### ğŸ¯ é«˜é¢‘é¢è¯•é—®é¢˜ï¼ˆSTAR æ³•åˆ™ï¼‰

#### Q14: å¦‚ä½•ä¿è¯ç”¨æˆ·è®¿é—®åˆ°æœ€æ–°çš„ä»£ç ï¼Ÿ

**S**ï¼šå‘å¸ƒæ–°ç‰ˆæœ¬åï¼Œç”¨æˆ·æµè§ˆå™¨åŠ è½½æ—§çš„ JS æ–‡ä»¶ï¼ˆå¼ºç¼“å­˜ï¼‰ã€‚

**T**ï¼šåœ¨ä¸æ¸…ç©ºç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œè®©ç”¨æˆ·è®¿é—®æœ€æ–°ä»£ç ã€‚

**A**ï¼š
1. **æ–‡ä»¶å hash åŒ–**ï¼š`vendor.abc123.js` â†’ å†…å®¹å˜åŒ– â†’ `vendor.def456.js`
2. **HTML ä¸ç¼“å­˜**ï¼šæ¯æ¬¡è®¿é—®éƒ½è·å–æœ€æ–° `index.html`
3. **HTML ä¸­å¼•ç”¨æ–°æ–‡ä»¶**ï¼š`<script src="vendor.def456.js">`
4. **æµè§ˆå™¨ç¼“å­˜æœªå‘½ä¸­**ï¼šè¯·æ±‚æ–°æ–‡ä»¶

**R**ï¼š
- ç”¨æˆ·æ— éœ€æ‰‹åŠ¨æ¸…ç¼“å­˜
- æ–°ç‰ˆæœ¬å‘å¸ƒå 5 åˆ†é’Ÿå†…ï¼Œ90% ç”¨æˆ·è‡ªåŠ¨æ›´æ–°

---

#### Q15: å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ

**å¼ºç¼“å­˜**ï¼š
- è¯·æ±‚ç›´æ¥ä»æµè§ˆå™¨ç¼“å­˜è¯»å–ï¼Œ**ä¸å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨**
- å“åº”å¤´ï¼š`Cache-Control: max-age=31536000`
- çŠ¶æ€ç ï¼š200 (from disk cache)

**åå•†ç¼“å­˜**ï¼š
- å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œ**éªŒè¯èµ„æºæ˜¯å¦è¿‡æœŸ**
- è¯·æ±‚å¤´ï¼š`If-None-Match: "etag-value"`
- å“åº”ï¼š304 Not Modifiedï¼ˆæœªä¿®æ”¹ï¼Œç»§ç»­ç”¨ç¼“å­˜ï¼‰

**æœ€ä½³å®è·µ**ï¼š
- é™æ€èµ„æºï¼ˆJS/CSS/å›¾ç‰‡ï¼‰ï¼šå¼ºç¼“å­˜ 1 å¹´
- HTMLï¼šåå•†ç¼“å­˜ï¼ˆæ¯æ¬¡éªŒè¯ï¼‰

---

### ğŸ”§ æŠ€æœ¯æ·±åº¦é—®é¢˜

#### Q16: Service Worker ç¼“å­˜å’Œ HTTP ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ

| ç‰¹æ€§ | HTTP ç¼“å­˜ | Service Worker |
|------|-----------|----------------|
| æ§åˆ¶æƒ | æµè§ˆå™¨ | JS ä»£ç  |
| ç¦»çº¿è®¿é—® | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| ç¼“å­˜ç­–ç•¥ | å›ºå®šï¼ˆå¼ºç¼“å­˜/åå•†ç¼“å­˜ï¼‰ | çµæ´»ï¼ˆå¯ç¼–ç¨‹ï¼‰ |
| æ›´æ–°æ—¶æœº | æ ¹æ® HTTP å¤´ | ä»£ç æ§åˆ¶ |

**Service Worker ç¤ºä¾‹**ï¼š
```javascript
// ç¼“å­˜ä¼˜å…ˆç­–ç•¥
self.addEventListener('fetch', event => {
  event.respondWith(
    caches.match(event.request).then(cached => {
      return cached || fetch(event.request)
    })
  )
})
```

**å®é™…åº”ç”¨**ï¼š
- PWA åº”ç”¨ï¼šService Worker ç¼“å­˜
- æ™®é€šç½‘ç«™ï¼šHTTP ç¼“å­˜ï¼ˆæ›´ç®€å•ï¼‰

---

## å…­ã€å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨ (ReactFlow)

### ğŸ“Œ æŠ€æœ¯å®ç°ç»†èŠ‚

#### 6.1 ReactFlow æ ¸å¿ƒæ¦‚å¿µ

**æ¶æ„**ï¼š
- **Nodes**ï¼šå·¥ä½œæµèŠ‚ç‚¹ï¼ˆå¼€å§‹ã€AI ä»£ç†ã€æ¡ä»¶åˆ¤æ–­ã€ç»“æŸï¼‰
- **Edges**ï¼šè¿æ¥çº¿ï¼ˆæ•°æ®æµå‘ï¼‰
- **Handles**ï¼šèŠ‚ç‚¹çš„è¿æ¥ç‚¹

**æ•°æ®ç»“æ„**ï¼š
```javascript
const nodes = [
  {
    id: '1',
    type: 'aiAgent', // è‡ªå®šä¹‰èŠ‚ç‚¹ç±»å‹
    position: { x: 100, y: 100 },
    data: { label: 'GPT-4 ä»£ç†', config: {...} }
  }
]

const edges = [
  {
    id: 'e1-2',
    source: '1',
    target: '2',
    animated: true
  }
]
```

#### 6.2 è™šæ‹ŸåŒ–æ¸²æŸ“ï¼ˆæ”¯æŒ 500+ èŠ‚ç‚¹ï¼‰

**é—®é¢˜**ï¼šæ¸²æŸ“ 500 ä¸ªèŠ‚ç‚¹ â†’ 500 ä¸ª DOM å…ƒç´  â†’ é¡µé¢å¡é¡¿ã€‚

**æ–¹æ¡ˆ**ï¼šè§†å£å¤–çš„èŠ‚ç‚¹ä¸æ¸²æŸ“ã€‚

**å®ç°**ï¼š
1. **ç›‘å¬æ»šåŠ¨/ç¼©æ”¾äº‹ä»¶**ï¼šè®¡ç®—å½“å‰è§†å£èŒƒå›´
2. **è¿‡æ»¤èŠ‚ç‚¹**ï¼šåªæ¸²æŸ“è§†å£å†…çš„èŠ‚ç‚¹
   ```javascript
   const visibleNodes = nodes.filter(node => {
     return isInViewport(node.position, viewport)
   })
   ```
3. **ReactFlow å†…ç½®æ”¯æŒ**ï¼šè®¾ç½® `nodesDraggable={false}` æ—¶è‡ªåŠ¨å¯ç”¨

**ä¼˜åŒ–æ•ˆæœ**ï¼š
- 500 èŠ‚ç‚¹æ¸²æŸ“æ—¶é—´ï¼š2s â†’ 200msï¼ˆ**90% æå‡**ï¼‰
- æ‹–æ‹½æµç•…åº¦ï¼š60 FPS
- ç¼–è¾‘æ•ˆç‡æå‡ 35%ï¼ˆå“åº”æ›´å¿«ï¼‰

#### 6.3 è‡ªå®šä¹‰èŠ‚ç‚¹ç»„ä»¶

**ç¤ºä¾‹**ï¼šAI ä»£ç†èŠ‚ç‚¹
```javascript
function AIAgentNode({ data }) {
  return (
    <div className="agent-node">
      <Handle type="target" position="top" />
      <div className="node-header">
        <AIIcon />
        <span>{data.label}</span>
      </div>
      <div className="node-body">
        <select value={data.model}>
          <option>GPT-4</option>
          <option>Claude</option>
        </select>
      </div>
      <Handle type="source" position="bottom" />
    </div>
  )
}

// æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹
const nodeTypes = { aiAgent: AIAgentNode }
<ReactFlow nodeTypes={nodeTypes} />
```

#### 6.4 å·¥ä½œæµæŒä¹…åŒ–

**ä¿å­˜**ï¼š
```javascript
const flow = reactFlowInstance.toObject()
await api.saveFlow({ id, data: flow })
```

**åŠ è½½**ï¼š
```javascript
const flow = await api.loadFlow(id)
setNodes(flow.nodes)
setEdges(flow.edges)
```

---

### ğŸ¯ é«˜é¢‘é¢è¯•é—®é¢˜ï¼ˆSTAR æ³•åˆ™ï¼‰

#### Q17: å¦‚ä½•ä¼˜åŒ–å¤§å‹æµç¨‹å›¾çš„æ¸²æŸ“æ€§èƒ½ï¼Ÿ

**S**ï¼šç”¨æˆ·åˆ›å»ºäº† 500 ä¸ªèŠ‚ç‚¹çš„å·¥ä½œæµï¼Œé¡µé¢å¡é¡¿ä¸¥é‡ã€‚

**T**ï¼šä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ï¼Œä¿è¯æµç•…æ“ä½œã€‚

**A**ï¼š
1. **è™šæ‹ŸåŒ–æ¸²æŸ“**ï¼šåªæ¸²æŸ“è§†å£å†…çš„èŠ‚ç‚¹ï¼ˆç±»ä¼¼è™šæ‹Ÿåˆ—è¡¨ï¼‰
2. **èŠ‚ç‚¹ memo åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
   ```javascript
   export default React.memo(AIAgentNode, (prev, next) => {
     return prev.data === next.data
   })
   ```
3. **Canvas é™çº§**ï¼šè¶…è¿‡ 1000 èŠ‚ç‚¹æ—¶ï¼Œç”¨ Canvas ç»˜åˆ¶ï¼ˆæ”¾å¼ƒäº¤äº’ï¼‰
4. **åˆ†å±‚åŠ è½½**ï¼šæŠ˜å å­æµç¨‹ï¼ŒæŒ‰éœ€å±•å¼€

**R**ï¼š
- æ¸²æŸ“æ—¶é—´ä» 2s é™è‡³ 200ms
- æ”¯æŒ 500+ èŠ‚ç‚¹æµç•…ç¼–è¾‘
- ç¼–è¾‘æ•ˆç‡æå‡ 35%

---

#### Q18: ReactFlow å’Œè‡ªç ” Canvas æ–¹æ¡ˆå¦‚ä½•é€‰æ‹©ï¼Ÿ

**ReactFlow**ï¼š
- **ä¼˜åŠ¿**ï¼šå¼€ç®±å³ç”¨ï¼Œæ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ã€å¯¹é½
- **åŠ£åŠ¿**ï¼šå¤§é‡èŠ‚ç‚¹æ€§èƒ½ä¸€èˆ¬ï¼ˆéœ€è¦ä¼˜åŒ–ï¼‰
- **é€‚ç”¨**ï¼šå¿«é€Ÿå¼€å‘ï¼ŒèŠ‚ç‚¹æ•° < 1000

**Canvas**ï¼š
- **ä¼˜åŠ¿**ï¼šæ€§èƒ½æè‡´ï¼ˆ10000 èŠ‚ç‚¹æ— å‹åŠ›ï¼‰
- **åŠ£åŠ¿**ï¼šéœ€è¦è‡ªå·±å®ç°æ‰€æœ‰äº¤äº’é€»è¾‘
- **é€‚ç”¨**ï¼šè¶…å¤§è§„æ¨¡æµç¨‹å›¾ï¼ˆå¦‚ç”µè·¯è®¾è®¡ï¼‰

**å®é™…é€‰æ‹©**ï¼šReactFlow + è™šæ‹ŸåŒ–ï¼Œå…¼é¡¾å¼€å‘æ•ˆç‡å’Œæ€§èƒ½ã€‚

---

### ğŸ”§ æŠ€æœ¯æ·±åº¦é—®é¢˜

#### Q19: ReactFlow çš„æ‹–æ‹½æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ

**æ ¸å¿ƒåŸç†**ï¼šHTML5 Drag & Drop API + çŠ¶æ€ç®¡ç†ã€‚

**æ­¥éª¤**ï¼š
1. **ç›‘å¬ `onDragStart`**ï¼šè®°å½•èµ·å§‹ä½ç½®
   ```javascript
   const onDragStart = (event, nodeType) => {
     event.dataTransfer.setData('application/reactflow', nodeType)
   }
   ```

2. **ç›‘å¬ `onDrop`**ï¼šåˆ›å»ºæ–°èŠ‚ç‚¹
   ```javascript
   const onDrop = (event) => {
     const type = event.dataTransfer.getData('application/reactflow')
     const position = reactFlowInstance.project({
       x: event.clientX,
       y: event.clientY
     })
     setNodes([...nodes, { id: uuid(), type, position }])
   }
   ```

3. **èŠ‚ç‚¹æ‹–æ‹½**ï¼šReactFlow å†…éƒ¨å¤„ç†ï¼ˆæ›´æ–° `position`ï¼‰

---

## ä¸ƒã€å·¥ç¨‹åŒ– (Turbo monorepo)

### ğŸ“Œ æŠ€æœ¯å®ç°ç»†èŠ‚

#### 7.1 Turbo monorepo æ¶æ„

**ç›®å½•ç»“æ„**ï¼š
```
agent-factory/
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ web/          # ä¸»åº”ç”¨
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/           # å…±äº« UI ç»„ä»¶
â”‚   â”œâ”€â”€ utils/        # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ api-client/   # API å°è£…
â”œâ”€â”€ turbo.json        # ä»»åŠ¡ç¼–æ’
â””â”€â”€ package.json      # æ ¹é…ç½®
```

**ä¼˜åŠ¿**ï¼š
- **ä»£ç å¤ç”¨**ï¼šUI ç»„ä»¶è·¨é¡¹ç›®å…±äº«
- **ä¾èµ–ç®¡ç†**ï¼šç»Ÿä¸€ç‰ˆæœ¬ï¼Œé¿å…å†²çª
- **å¹¶è¡Œæ„å»º**ï¼šTurbo è‡ªåŠ¨åˆ†æä¾èµ–ï¼Œå¹¶è¡Œæ‰§è¡Œä»»åŠ¡

#### 7.2 Turbo ä»»åŠ¡ç¼–æ’

**é…ç½®**ï¼š
```json
// turbo.json
{
  "pipeline": {
    "build": {
      "dependsOn": ["^build"], // å…ˆæ„å»ºä¾èµ–åŒ…
      "outputs": ["dist/**"]
    },
    "lint": {
      "cache": true // ç¼“å­˜ç»“æœï¼Œæœªä¿®æ”¹ä¸é‡å¤æ‰§è¡Œ
    },
    "test": {
      "dependsOn": ["build"]
    }
  }
}
```

**æ‰§è¡Œ**ï¼š
```bash
turbo run build --filter=web  # åªæ„å»º web åº”ç”¨åŠå…¶ä¾èµ–
turbo run lint                # å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰åŒ…çš„ lint
```

#### 7.3 ESLint + Prettier + Husky è§„èŒƒ

**ESLint é…ç½®**ï¼š
```javascript
// .eslintrc.js
module.exports = {
  extends: [
    'eslint:recommended',
    'plugin:react/recommended',
    'plugin:@typescript-eslint/recommended'
  ],
  rules: {
    'no-console': 'warn',
    'react/prop-types': 'off' // ä½¿ç”¨ TSï¼Œä¸éœ€è¦ PropTypes
  }
}
```

**Prettier é…ç½®**ï¼š
```json
{
  "singleQuote": true,
  "semi": false,
  "printWidth": 100
}
```

**Husky é’©å­**ï¼š
```bash
# .husky/pre-commit
npm run lint-staged

# package.json
"lint-staged": {
  "*.{js,jsx,ts,tsx}": ["eslint --fix", "prettier --write"]
}
```

#### 7.4 æ„å»ºåˆ†æå·¥å…·

**è‡ªç ”å·¥å…·**ï¼š
```javascript
// scripts/analyze.js
import { visualizer } from 'rollup-plugin-visualizer'

export default {
  plugins: [
    visualizer({
      open: true,
      gzipSize: true,
      brotliSize: true
    })
  ]
}
```

**è¾“å‡º**ï¼šäº¤äº’å¼ä¾èµ–å›¾ï¼Œç‚¹å‡»æŸ¥çœ‹æ¯ä¸ªåŒ…çš„å¤§å°ã€‚

#### 7.5 CI/CD è‡ªåŠ¨åŒ–

**æµç¨‹**ï¼š
```yaml
# .github/workflows/deploy.yml
name: Deploy
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm ci
      - run: turbo run build --filter=web
      - run: turbo run test
      - run: deploy.sh  # éƒ¨ç½²åˆ°æœåŠ¡å™¨
```

**æ•ˆæœ**ï¼š
- ä»£ç æ¨é€ â†’ è‡ªåŠ¨æ„å»ºæµ‹è¯• â†’ è‡ªåŠ¨éƒ¨ç½²
- äº¤ä»˜å‘¨æœŸä» 1 å‘¨ç¼©çŸ­è‡³ 3-4 å¤©ï¼ˆ**30% æå‡**ï¼‰

---

### ğŸ¯ é«˜é¢‘é¢è¯•é—®é¢˜ï¼ˆSTAR æ³•åˆ™ï¼‰

#### Q20: ä¸ºä»€ä¹ˆé€‰æ‹© Turbo monorepoï¼Ÿå’Œ Lerna çš„åŒºåˆ«ï¼Ÿ

**S**ï¼šå¤šä¸ªé¡¹ç›®å…±äº«ç»„ä»¶åº“ï¼Œéœ€è¦ç»Ÿä¸€ç®¡ç†ä¾èµ–å’Œæ„å»ºã€‚

**T**ï¼šé€‰æ‹©åˆé€‚çš„ monorepo å·¥å…·ã€‚

**A**ï¼š
- **Lerna**ï¼šè€ç‰Œå·¥å…·ï¼ŒåŠŸèƒ½å®Œå–„ï¼Œä½†æ„å»ºé€Ÿåº¦æ…¢
- **Turbo**ï¼šåŸºäº Rustï¼Œå¹¶è¡Œæ„å»º + æ™ºèƒ½ç¼“å­˜ï¼Œé€Ÿåº¦å¿« 10 å€
- **é€‰æ‹© Turbo åŸå› **ï¼š
  1. å¹¶è¡Œæ„å»ºï¼ˆåˆ©ç”¨å¤šæ ¸ CPUï¼‰
  2. å¢é‡æ„å»ºï¼ˆåªæ„å»ºä¿®æ”¹çš„åŒ…ï¼‰
  3. è¿œç¨‹ç¼“å­˜ï¼ˆå›¢é˜Ÿå…±äº«æ„å»ºç»“æœï¼‰

**R**ï¼š
- æ„å»ºæ—¶é—´ä» 5 åˆ†é’Ÿé™è‡³ 30 ç§’
- å¼€å‘ä½“éªŒæå‡ï¼Œçƒ­æ›´æ–°æ›´å¿«

---

#### Q21: å¦‚ä½•ä¿è¯å›¢é˜Ÿä»£ç é£æ ¼ä¸€è‡´ï¼Ÿ

**S**ï¼šå›¢é˜Ÿ 10 äººï¼Œä»£ç é£æ ¼æ··ä¹±ï¼ˆæœ‰äººç”¨åˆ†å·ï¼Œæœ‰äººä¸ç”¨ï¼‰ã€‚

**T**ï¼šå»ºç«‹ç»Ÿä¸€çš„ä»£ç è§„èŒƒï¼Œè‡ªåŠ¨åŒ–æ‰§è¡Œã€‚

**A**ï¼š
1. **ESLint**ï¼šè¯­æ³•æ£€æŸ¥ï¼Œç¦æ­¢ä¸è§„èŒƒå†™æ³•
2. **Prettier**ï¼šæ ¼å¼åŒ–ï¼Œç»Ÿä¸€ç¼©è¿›ã€å¼•å·ã€åˆ†å·
3. **Husky + lint-staged**ï¼šæäº¤å‰è‡ªåŠ¨æ ¼å¼åŒ–
4. **CI æ£€æŸ¥**ï¼šæœªé€šè¿‡ lint ä¸å…è®¸åˆå¹¶

**R**ï¼š
- ä»£ç é£æ ¼ 100% ä¸€è‡´
- Code Review æ—¶é—´å‡å°‘ 40%ï¼ˆä¸å†è®¨è®ºæ ¼å¼é—®é¢˜ï¼‰

---

### ğŸ”§ æŠ€æœ¯æ·±åº¦é—®é¢˜

#### Q22: Turbo çš„å¢é‡æ„å»ºæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ

**åŸç†**ï¼šå†…å®¹å¯»å€ï¼ˆContent-Addressed Storageï¼‰ã€‚

**æ­¥éª¤**ï¼š
1. **è®¡ç®—è¾“å…¥ hash**ï¼šæºæ–‡ä»¶ + ä¾èµ– + é…ç½® â†’ SHA256
2. **æŸ¥è¯¢ç¼“å­˜**ï¼šç¼“å­˜ä¸­æœ‰ç›¸åŒ hash â†’ è·³è¿‡æ„å»ºï¼Œç›´æ¥è¿”å›ç»“æœ
3. **æ‰§è¡Œæ„å»º**ï¼šç¼“å­˜æœªå‘½ä¸­ â†’ æ‰§è¡Œä»»åŠ¡ â†’ ä¿å­˜ç»“æœåˆ°ç¼“å­˜

**ç¤ºä¾‹**ï¼š
```bash
# ç¬¬ä¸€æ¬¡æ„å»º
turbo run build  # 5 ç§’

# ä¿®æ”¹ package-a
turbo run build  # åªé‡æ–°æ„å»º package-aï¼Œ1 ç§’

# æœªä¿®æ”¹ä»»ä½•æ–‡ä»¶
turbo run build  # ç¼“å­˜å‘½ä¸­ï¼Œ0 ç§’
```

**è¿œç¨‹ç¼“å­˜**ï¼š
- æœ¬åœ°ç¼“å­˜ï¼š`.turbo/cache/`
- è¿œç¨‹ç¼“å­˜ï¼šVercel Remote Cacheï¼ˆå›¢é˜Ÿå…±äº«ï¼‰

---

## å…«ã€ç»¼åˆé—®é¢˜

### ğŸ¯ é¡¹ç›®äº®ç‚¹æ€»ç»“ï¼ˆç”µæ¢¯æ¼”è®²ï¼‰

**30 ç§’ç‰ˆæœ¬**ï¼š
æˆ‘ä¸»å¯¼äº† AgentFactory è¿™ä¸ª AI ä»£ç†å¹³å°çš„å¾®å‰ç«¯æ¶æ„è®¾è®¡ï¼Œè§£å†³äº†"æ•°åƒä¸ª HTTP è¯·æ±‚"çš„æ€§èƒ½é—®é¢˜ï¼Œå°†è¯·æ±‚æ•°é™ä½ 90%+ï¼Œé¦–å±åŠ è½½æ—¶é—´ç¼©çŸ­ 50%ã€‚åŒæ—¶å®ç°äº†ä¸ä¸»å¹³å°çš„ SSO è®¤è¯é›†æˆï¼Œè®¤è¯æˆåŠŸç‡è¾¾ 99.8%ã€‚é€šè¿‡ ReactFlow å’Œè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œæ”¯æŒ 500+ èŠ‚ç‚¹çš„æµç¨‹ç¼–è¾‘è€Œä¸å¡é¡¿ã€‚

**1 åˆ†é’Ÿç‰ˆæœ¬**ï¼š
è¿™æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„ AI ä»£ç†ç®¡ç†å¹³å°ï¼Œæˆ‘è´Ÿè´£ä» 0 åˆ° 1 çš„æ¶æ„è®¾è®¡ã€‚

**ç¬¬ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å¾®å‰ç«¯é›†æˆ**ï¼šæˆ‘é€‰ç”¨ Wujie æ–¹æ¡ˆï¼Œè®¾è®¡äº†äº‹ä»¶æ€»çº¿å®ç°ä¸»å­åº”ç”¨çŠ¶æ€åŒæ­¥ï¼Œå“åº”æ—¶é—´æ§åˆ¶åœ¨ 100ms ä»¥å†…ï¼Œå¹¶ä¸”æ”¯æŒç‹¬ç«‹éƒ¨ç½²å’ŒåµŒå…¥å¼éƒ¨ç½²ä¸¤ç§æ¨¡å¼ã€‚

**ç¬¬äºŒä¸ªæŒ‘æˆ˜æ˜¯æ€§èƒ½ä¼˜åŒ–**ï¼šåˆæœŸé¦–å±æœ‰ 3000+ HTTP è¯·æ±‚ï¼Œæˆ‘é€šè¿‡ Vite æ™ºèƒ½ä»£ç åˆ†å‰²ï¼Œå°†è¯·æ±‚æ•°é™è‡³ 20-30 ä¸ªï¼ŒåŠ è½½æ—¶é—´ä» 8 ç§’ä¼˜åŒ–åˆ° 3 ç§’ã€‚åŒæ—¶é…ç½®äº†é•¿æœŸç¼“å­˜ç­–ç•¥ï¼Œç¼“å­˜å‘½ä¸­ç‡è¾¾åˆ° 85%ã€‚

**ç¬¬ä¸‰ä¸ªæŒ‘æˆ˜æ˜¯å¤æ‚äº¤äº’**ï¼šç”¨æˆ·éœ€è¦ç¼–è¾‘å¤§å‹å·¥ä½œæµï¼ˆ500+ èŠ‚ç‚¹ï¼‰ï¼Œæˆ‘ä½¿ç”¨ ReactFlow ç»“åˆè™šæ‹ŸåŒ–æ¸²æŸ“æŠ€æœ¯ï¼Œä¿è¯äº†æµç•…çš„ç¼–è¾‘ä½“éªŒã€‚

æœ€ç»ˆè¿™ä¸ªé¡¹ç›®æˆåŠŸä¸Šçº¿ï¼Œæ”¯æ’‘äº†å…¬å¸æ ¸å¿ƒ AI ä¸šåŠ¡ï¼Œè·å¾—äº†ç”¨æˆ·å’Œå›¢é˜Ÿçš„è®¤å¯ã€‚

---

### ğŸ¯ é«˜é¢‘ç»¼åˆé—®é¢˜

#### Q23: é¡¹ç›®ä¸­é‡åˆ°çš„æœ€å¤§å›°éš¾æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³çš„ï¼Ÿ

**STAR å›ç­”**ï¼š

**S**ï¼šé¡¹ç›®ä¸Šçº¿å‰ä¸€å‘¨ï¼Œæµ‹è¯•å›¢é˜Ÿåé¦ˆé¦–å±åŠ è½½ 8 ç§’ï¼Œç”¨æˆ·æ— æ³•æ¥å—ã€‚

**T**ï¼šå¿…é¡»åœ¨ä¸€å‘¨å†…å°†åŠ è½½æ—¶é—´é™è‡³ 3 ç§’ä»¥å†…ã€‚

**A**ï¼š
1. **ç´§æ€¥æ’æŸ¥**ï¼šä½¿ç”¨ Lighthouse å’Œ Bundle Analyzer å®šä½é—®é¢˜
2. **å®šä½æ ¹å› **ï¼šå‘ç° 3000+ HTTP è¯·æ±‚ï¼Œä¾èµ–æœªé¢„æ„å»º
3. **å¿«é€Ÿä¼˜åŒ–**ï¼š
   - é…ç½® Vite `optimizeDeps`ï¼Œé¢„æ„å»ºç¬¬ä¸‰æ–¹åº“
   - æ‰‹åŠ¨åˆ†å‰² chunkï¼Œåˆå¹¶å°æ–‡ä»¶
   - å¯ç”¨ Gzip å‹ç¼©ï¼Œå‡å°‘ä¼ è¾“å¤§å°
4. **éªŒè¯æ•ˆæœ**ï¼šåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ï¼ŒåŠ è½½æ—¶é—´é™è‡³ 2.5 ç§’
5. **ä¸Šçº¿**ï¼šç°åº¦å‘å¸ƒ â†’ å…¨é‡å‘å¸ƒ

**R**ï¼š
- åŠ è½½æ—¶é—´ä» 8 ç§’é™è‡³ 2.5 ç§’ï¼ˆè¶…å‡ºé¢„æœŸï¼‰
- æŒ‰æ—¶ä¸Šçº¿ï¼Œç”¨æˆ·æ»¡æ„åº¦ 90%+
- æ€»ç»“ç»éªŒï¼Œåˆ¶å®šæ€§èƒ½ä¼˜åŒ– checklist

---

#### Q24: å¦‚æœè®©ä½ é‡æ–°è®¾è®¡è¿™ä¸ªé¡¹ç›®ï¼Œä¼šåšå“ªäº›æ”¹è¿›ï¼Ÿ

**å›ç­”**ï¼š
1. **æ¶æ„å±‚é¢**ï¼š
   - å¼•å…¥ **Module Federation**ï¼Œå®ç°çœŸæ­£çš„è¿è¡Œæ—¶ä¾èµ–å…±äº«
   - ä½¿ç”¨ **GraphQL** æ›¿ä»£ REST APIï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°

2. **æ€§èƒ½å±‚é¢**ï¼š
   - å¼•å…¥ **Service Worker**ï¼Œå®ç°ç¦»çº¿è®¿é—®
   - ä½¿ç”¨ **WebAssembly** åŠ é€Ÿå·¥ä½œæµæ‰§è¡Œå¼•æ“

3. **å·¥ç¨‹å±‚é¢**ï¼š
   - å¼•å…¥ **Storybook**ï¼Œç»„ä»¶å¯è§†åŒ–å¼€å‘
   - å¢åŠ  **E2E æµ‹è¯•**ï¼ˆPlaywrightï¼‰ï¼Œæé«˜æµ‹è¯•è¦†ç›–ç‡

4. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - å¢åŠ  **éª¨æ¶å±**ï¼Œä¼˜åŒ–åŠ è½½ä½“éªŒ
   - æ”¯æŒ **ååŒç¼–è¾‘**ï¼ˆWebSocketï¼‰ï¼Œå¤šäººå®æ—¶åä½œ

---

#### Q25: ä½ åœ¨é¡¹ç›®ä¸­æ‰¿æ‹…çš„è§’è‰²æ˜¯ä»€ä¹ˆï¼Ÿ

**å›ç­”**ï¼š
æˆ‘åœ¨é¡¹ç›®ä¸­æ‹…ä»» **å‰ç«¯æ¶æ„è´Ÿè´£äºº**ï¼Œä¸»è¦èŒè´£åŒ…æ‹¬ï¼š

**æŠ€æœ¯å†³ç­–**ï¼ˆ40%ï¼‰ï¼š
- é€‰å‹å¾®å‰ç«¯æ–¹æ¡ˆï¼ˆå¯¹æ¯” qiankun/Wujie/Module Federationï¼‰
- åˆ¶å®šæ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼ˆæ„å»ºã€åŠ è½½ã€ç¼“å­˜ï¼‰
- è®¾è®¡å·¥ç¨‹åŒ–è§„èŒƒï¼ˆESLint/Prettier/Huskyï¼‰

**æ ¸å¿ƒå¼€å‘**ï¼ˆ40%ï¼‰ï¼š
- å®ç°å¾®å‰ç«¯é›†æˆï¼ˆWujie äº‹ä»¶æ€»çº¿ã€SSO è®¤è¯ï¼‰
- ä¼˜åŒ–æ„å»ºé…ç½®ï¼ˆVite ä»£ç åˆ†å‰²ã€Nginx ç¼“å­˜ï¼‰
- å¼€å‘å·¥ä½œæµç¼–è¾‘å™¨ï¼ˆReactFlow è™šæ‹ŸåŒ–ï¼‰

**å›¢é˜Ÿåä½œ**ï¼ˆ20%ï¼‰ï¼š
- æŒ‡å¯¼ 2 ååˆçº§å¼€å‘å®ŒæˆåŠŸèƒ½æ¨¡å—
- è¿›è¡Œ Code Reviewï¼Œä¿è¯ä»£ç è´¨é‡
- ç¼–å†™æŠ€æœ¯æ–‡æ¡£ï¼Œæ²‰æ·€å›¢é˜ŸçŸ¥è¯†

---

## ä¹ã€æŠ€æœ¯æ ˆæ·±åº¦é—®é¢˜

### React 18 æ–°ç‰¹æ€§

#### Q26: React 18 çš„ Concurrent Mode å¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ

**æ ¸å¿ƒç‰¹æ€§**ï¼š
1. **å¹¶å‘æ¸²æŸ“**ï¼šReact å¯ä»¥ä¸­æ–­æ¸²æŸ“ï¼Œä¼˜å…ˆå¤„ç†é«˜ä¼˜ä»»åŠ¡
2. **è‡ªåŠ¨æ‰¹å¤„ç†**ï¼šå¤šæ¬¡ setState åˆå¹¶ä¸ºä¸€æ¬¡æ¸²æŸ“ï¼ˆåŒ…æ‹¬å¼‚æ­¥ï¼‰
3. **Transition API**ï¼šæ ‡è®°ä½ä¼˜å…ˆçº§æ›´æ–°

**å®é™…åº”ç”¨**ï¼š
```javascript
import { useTransition } from 'react'

const [isPending, startTransition] = useTransition()

const handleSearch = (keyword) => {
  // é«˜ä¼˜ï¼šç«‹å³æ›´æ–°è¾“å…¥æ¡†
  setInput(keyword)
  
  // ä½ä¼˜ï¼šå»¶è¿Ÿæœç´¢ç»“æœï¼ˆä¸é˜»å¡è¾“å…¥ï¼‰
  startTransition(() => {
    setSearchResults(searchAPI(keyword))
  })
}
```

**æ•ˆæœ**ï¼šè¾“å…¥æ¡†å“åº”æµç•…ï¼ˆ60 FPSï¼‰ï¼Œæœç´¢ç»“æœå»¶è¿ŸåŠ è½½ã€‚

---

### Redux Toolkit

#### Q27: Redux Toolkit ç›¸æ¯”åŸç”Ÿ Redux çš„ä¼˜åŠ¿ï¼Ÿ

**åŸç”Ÿ Redux çš„ç—›ç‚¹**ï¼š
- æ ·æ¿ä»£ç å¤šï¼ˆaction/reducer/constantsï¼‰
- Immutable æ›´æ–°å¤æ‚ï¼ˆæ·±æ‹·è´ï¼‰
- å¼‚æ­¥é€»è¾‘éœ€è¦ redux-thunk/saga

**Redux Toolkit çš„æ”¹è¿›**ï¼š
1. **createSlice**ï¼šè‡ªåŠ¨ç”Ÿæˆ action/reducer
   ```javascript
   const userSlice = createSlice({
     name: 'user',
     initialState: { name: '', age: 0 },
     reducers: {
       setUser(state, action) {
         state.name = action.payload.name // å†…éƒ¨ç”¨ Immerï¼Œçœ‹èµ·æ¥åƒ mutable
       }
     }
   })
   ```

2. **createAsyncThunk**ï¼šç®€åŒ–å¼‚æ­¥é€»è¾‘
   ```javascript
   const fetchUser = createAsyncThunk('user/fetch', async (id) => {
     return await api.getUser(id)
   })
   ```

3. **å†…ç½® DevTools**ï¼šæ— éœ€é¢å¤–é…ç½®

---

### TypeScript

#### Q28: å¦‚ä½•åœ¨ React é¡¹ç›®ä¸­å……åˆ†åˆ©ç”¨ TypeScriptï¼Ÿ

**æœ€ä½³å®è·µ**ï¼š
1. **Props ç±»å‹å®šä¹‰**ï¼š
   ```typescript
   interface ButtonProps {
     label: string
     onClick: () => void
     disabled?: boolean
   }
   
   const Button: React.FC<ButtonProps> = ({ label, onClick, disabled }) => {
     // ...
   }
   ```

2. **æ³›å‹ç»„ä»¶**ï¼š
   ```typescript
   interface SelectProps<T> {
     options: T[]
     onChange: (value: T) => void
   }
   
   function Select<T>({ options, onChange }: SelectProps<T>) {
     // ...
   }
   ```

3. **ç±»å‹å®ˆå«**ï¼š
   ```typescript
   function isError(response: ApiResponse): response is ErrorResponse {
     return 'error' in response
   }
   
   if (isError(response)) {
     console.error(response.error) // TypeScript çŸ¥é“è¿™æ˜¯ ErrorResponse
   }
   ```

---

## åã€é¢è¯•è¯æœ¯æŠ€å·§

### 1. ä½¿ç”¨æ•°æ®è¯´è¯
- âŒ "æˆ‘ä¼˜åŒ–äº†æ€§èƒ½"
- âœ… "æˆ‘å°†é¦–å±åŠ è½½æ—¶é—´ä» 8 ç§’ä¼˜åŒ–åˆ° 2.5 ç§’ï¼ŒHTTP è¯·æ±‚æ•°å‡å°‘ 90%"

### 2. çªå‡ºä¸ªäººè´¡çŒ®
- âŒ "æˆ‘ä»¬å›¢é˜Ÿåšäº†å¾®å‰ç«¯"
- âœ… "æˆ‘ä¸»å¯¼è®¾è®¡äº†å¾®å‰ç«¯æ¶æ„ï¼Œé€‰å‹ Wujie æ–¹æ¡ˆï¼Œå¹¶å®ç°äº†äº‹ä»¶æ€»çº¿"

### 3. å±•ç¤ºæ€è€ƒè¿‡ç¨‹
- âŒ "æˆ‘ç”¨äº† Vite"
- âœ… "æˆ‘å¯¹æ¯”äº† Webpack å’Œ Viteï¼Œè€ƒè™‘åˆ°é¡¹ç›®ä½¿ç”¨ React 18 + ESMï¼ŒVite çš„çƒ­æ›´æ–°é€Ÿåº¦æ›´å¿«ï¼Œæ‰€ä»¥é€‰æ‹©äº† Vite"

### 4. æ‰¿è®¤ä¸è¶³ï¼Œå±•ç¤ºå­¦ä¹ èƒ½åŠ›
- âŒ "æˆ‘ä»€ä¹ˆéƒ½ä¼š"
- âœ… "è¿™ä¸ªæŠ€æœ¯æˆ‘ä¹‹å‰æ²¡ç”¨è¿‡,ä½†æˆ‘ä¼šåœ¨é¢è¯•åæ·±å…¥å­¦ä¹ ï¼Œæˆ‘ä¹‹å‰ä¹Ÿæ˜¯è¿™æ ·å¿«é€ŸæŒæ¡ Wujie çš„"

### 5. å‡†å¤‡åé—®ç¯èŠ‚
- "è´µå¸çš„å‰ç«¯æŠ€æœ¯æ ˆæ˜¯ä»€ä¹ˆï¼Ÿ"
- "å›¢é˜Ÿç›®å‰é¢ä¸´çš„æœ€å¤§æŠ€æœ¯æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ"
- "è¿™ä¸ªå²—ä½çš„æ™‹å‡è·¯å¾„æ˜¯æ€æ ·çš„ï¼Ÿ"

---

## åä¸€ã€å¿«é€Ÿè®°å¿†æ¸…å•

### æ ¸å¿ƒæ•°æ®ï¼ˆå¿…é¡»è®°ä½ï¼‰
- **HTTP è¯·æ±‚**ï¼š3000+ â†’ 20-30ï¼ˆå‡å°‘ 90%+ï¼‰
- **é¦–å±åŠ è½½**ï¼š8s â†’ 2.5sï¼ˆç¼©çŸ­ 50%+ï¼‰
- **Bundle å¤§å°**ï¼š5MB â†’ 3MBï¼ˆå‡å°‘ 40%ï¼‰
- **ç¼“å­˜å‘½ä¸­ç‡**ï¼š85%
- **è®¤è¯æˆåŠŸç‡**ï¼š99.8%
- **çŠ¶æ€åŒæ­¥**ï¼š< 100ms
- **æ”¯æŒèŠ‚ç‚¹æ•°**ï¼š500+
- **äº¤ä»˜å‘¨æœŸ**ï¼šç¼©çŸ­ 30%

### å…³é”®æŠ€æœ¯è¯
- **å¾®å‰ç«¯**ï¼šWujieã€äº‹ä»¶æ€»çº¿ã€iframe æ²™ç®±ã€ç‹¬ç«‹éƒ¨ç½²
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä»£ç åˆ†å‰²ã€Tree Shakingã€Gzipã€é•¿æœŸç¼“å­˜
- **å·¥ç¨‹åŒ–**ï¼šTurbo monorepoã€ESLintã€Huskyã€CI/CD
- **è®¤è¯**ï¼šSSOã€JWTã€Token åˆ·æ–°ã€é˜²å¹¶å‘
- **å¯è§†åŒ–**ï¼šReactFlowã€è™šæ‹ŸåŒ–æ¸²æŸ“ã€è‡ªå®šä¹‰èŠ‚ç‚¹

### å¸¸è§é™·é˜±é—®é¢˜
1. **"ä½ åšè¿‡æœ€éš¾çš„é¡¹ç›®æ˜¯ä»€ä¹ˆ?"** â†’ è®² 3000+ è¯·æ±‚ä¼˜åŒ–
2. **"é‡åˆ°è¿‡ä»€ä¹ˆæŠ€æœ¯éš¾é¢˜?"** â†’ è®² Token å¹¶å‘åˆ·æ–°
3. **"ä¸ºä»€ä¹ˆç¦»èŒ?"** â†’ å¯»æ±‚æ›´å¤§æŒ‘æˆ˜ï¼ˆä¸åæ§½å‰å…¬å¸ï¼‰
4. **"æœŸæœ›è–ªèµ„?"** â†’ æ ¹æ®å¸‚åœºè¡Œæƒ…ï¼Œ15-20% æ¶¨å¹…

---

## åäºŒã€æ¨¡æ‹Ÿé¢è¯•é—®ç­”ï¼ˆå®Œæ•´ç‰ˆï¼‰

### åœºæ™¯ 1ï¼šæŠ€æœ¯é¢ï¼ˆ1 å°æ—¶ï¼‰

**é¢è¯•å®˜**ï¼šä»‹ç»ä¸€ä¸‹ä½ çš„ AgentFactory é¡¹ç›®ã€‚

**å›ç­”**ï¼š
è¿™æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„ AI ä»£ç†ç®¡ç†å¹³å°ï¼Œæˆ‘è´Ÿè´£å‰ç«¯æ¶æ„è®¾è®¡ã€‚é¡¹ç›®æœ€å¤§çš„ç‰¹ç‚¹æ˜¯å¾®å‰ç«¯æ¶æ„ï¼Œä½œä¸ºå­åº”ç”¨åµŒå…¥åˆ°ä¸»å¹³å°ã€‚

æˆ‘ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼š
1. **å¾®å‰ç«¯é›†æˆ**ï¼šåŸºäº Wujieï¼Œå®ç°ä¸»å­åº”ç”¨çŠ¶æ€åŒæ­¥ï¼Œå“åº” < 100ms
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šè§£å†³ 3000+ HTTP è¯·æ±‚é—®é¢˜ï¼Œé™è‡³ 20-30 ä¸ªï¼ŒåŠ è½½æ—¶é—´ç¼©çŸ­ 50%
3. **å·¥ä½œæµç¼–è¾‘å™¨**ï¼šæ”¯æŒ 500+ èŠ‚ç‚¹æµç•…ç¼–è¾‘

æœ€ç»ˆé¡¹ç›®æˆåŠŸä¸Šçº¿ï¼Œæ”¯æ’‘äº†å…¬å¸æ ¸å¿ƒä¸šåŠ¡ã€‚

---

**é¢è¯•å®˜**ï¼šä¸ºä»€ä¹ˆé€‰æ‹© Wujie è€Œä¸æ˜¯ qiankunï¼Ÿ

**å›ç­”**ï¼š
æˆ‘åšè¿‡è¯¦ç»†å¯¹æ¯”ï¼š

**qiankun**ï¼šåŸºäº Proxy æ²™ç®±ï¼Œæ ·å¼éš”ç¦»ä¾èµ– Shadow DOMï¼Œä½†æˆ‘ä»¬ç”¨çš„ Material-UI æœ‰å¾ˆå¤šå…¨å±€æ ·å¼ï¼Œå®¹æ˜“å†²çªã€‚

**Wujie**ï¼šåŸºäº iframe æ²™ç®± + WebComponentï¼Œæ ·å¼å¤©ç„¶éš”ç¦»ã€‚è€Œä¸” Wujie å¯¹ Vite çš„å…¼å®¹æ€§æ›´å¥½ï¼Œæˆ‘ä»¬é¡¹ç›®ç”¨çš„æ˜¯ Viteã€‚

æ‰€ä»¥ç»¼åˆè€ƒè™‘ï¼Œé€‰æ‹©äº† Wujieã€‚

---

**é¢è¯•å®˜**ï¼š3000+ HTTP è¯·æ±‚æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿå¦‚ä½•ä¼˜åŒ–çš„ï¼Ÿ

**å›ç­”**ï¼š
**åŸå› **ï¼šVite å¼€å‘æ¨¡å¼æŒ‰éœ€åŠ è½½ï¼Œæ¯ä¸ªæ¨¡å—ä¸€ä¸ªè¯·æ±‚ã€‚ç”Ÿäº§ç¯å¢ƒä¹Ÿæ˜¯è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºä¾èµ–æ²¡æœ‰é¢„æ„å»ºã€‚

**ä¼˜åŒ–**ï¼š
1. **ä¾èµ–é¢„æ„å»º**ï¼šé…ç½® `optimizeDeps.include`ï¼Œå°† lodash ç­‰åº“æ‰“åŒ…æˆå•æ–‡ä»¶
2. **æ‰‹åŠ¨åˆ†åŒ…**ï¼šé…ç½® `manualChunks`ï¼Œå°† Reactã€UI åº“ã€ä¸šåŠ¡ä»£ç åˆ†åˆ«æ‰“åŒ…
3. **è·¯ç”±æ‡’åŠ è½½**ï¼šä½¿ç”¨ `React.lazy()` æŒ‰éœ€åŠ è½½é¡µé¢
4. **åˆå¹¶å° chunk**ï¼šå°† 10 ä¸ªå¼¹çª—ç»„ä»¶åˆå¹¶ä¸º 1 ä¸ª chunk

**ç»“æœ**ï¼šè¯·æ±‚æ•°é™è‡³ 20-30 ä¸ªï¼ŒåŠ è½½æ—¶é—´ä» 8 ç§’é™è‡³ 2.5 ç§’ã€‚

---

**é¢è¯•å®˜**ï¼šç¼“å­˜ç­–ç•¥æ˜¯æ€ä¹ˆè®¾è®¡çš„ï¼Ÿ

**å›ç­”**ï¼š
**ç›®æ ‡**ï¼šé™æ€èµ„æºé•¿æœŸç¼“å­˜ï¼ŒHTML æ¯æ¬¡æ›´æ–°ã€‚

**å®ç°**ï¼š
1. **æ–‡ä»¶å hash åŒ–**ï¼š`vendor.abc123.js`ï¼Œå†…å®¹å˜åŒ–æ‰æ”¹å˜æ–‡ä»¶å
2. **Nginx é…ç½®**ï¼šJS/CSS ç¼“å­˜ 1 å¹´ï¼ŒHTML ä¸ç¼“å­˜
3. **è‡ªåŠ¨æ›´æ–°æ£€æµ‹**ï¼šè½®è¯¢ `/version.json`ï¼Œå‘ç°æ–°ç‰ˆæœ¬æç¤ºç”¨æˆ·åˆ·æ–°

**ç»“æœ**ï¼šç¼“å­˜å‘½ä¸­ç‡ 85%ï¼Œç”¨æˆ·æ— éœ€æ‰‹åŠ¨æ¸…ç¼“å­˜ã€‚

---

**é¢è¯•å®˜**ï¼šReactFlow å¦‚ä½•æ”¯æŒ 500+ èŠ‚ç‚¹ï¼Ÿ

**å›ç­”**ï¼š
**æ ¸å¿ƒæŠ€æœ¯ï¼šè™šæ‹ŸåŒ–æ¸²æŸ“**ã€‚

ç±»ä¼¼è™šæ‹Ÿåˆ—è¡¨ï¼Œåªæ¸²æŸ“è§†å£å†…çš„èŠ‚ç‚¹ã€‚å®ç°æ­¥éª¤ï¼š
1. ç›‘å¬æ»šåŠ¨/ç¼©æ”¾äº‹ä»¶ï¼Œè®¡ç®—è§†å£èŒƒå›´
2. è¿‡æ»¤å‡ºè§†å£å†…çš„èŠ‚ç‚¹
3. åªæ¸²æŸ“è¿™äº›èŠ‚ç‚¹ï¼Œå…¶ä»–èŠ‚ç‚¹ä¸æ¸²æŸ“ DOM

**é¢å¤–ä¼˜åŒ–**ï¼š
- èŠ‚ç‚¹ `React.memo`ï¼Œé¿å…ä¸å¿…è¦æ¸²æŸ“
- è¾¹çš„ç®€åŒ–ç»˜åˆ¶ï¼ˆç”¨ SVG pathï¼‰

**æ•ˆæœ**ï¼šæ¸²æŸ“æ—¶é—´ä» 2 ç§’é™è‡³ 200msï¼Œæ‹–æ‹½æµç•… 60 FPSã€‚

---

### åœºæ™¯ 2ï¼šé¡¹ç›®ç»ç†é¢ï¼ˆ30 åˆ†é’Ÿï¼‰

**é¢è¯•å®˜**ï¼šé¡¹ç›®ä¸­é‡åˆ°è¿‡ä»€ä¹ˆå›°éš¾ï¼Ÿ

**å›ç­”**ï¼š
æœ€å¤§çš„å›°éš¾æ˜¯ä¸Šçº¿å‰ä¸€å‘¨ï¼Œæµ‹è¯•åé¦ˆåŠ è½½å¤ªæ…¢ï¼ˆ8 ç§’ï¼‰ã€‚

æˆ‘ç´§æ€¥æ’æŸ¥ï¼Œç”¨ Lighthouse å’Œ Network é¢æ¿ï¼Œå‘ç° 3000+ è¯·æ±‚ã€‚ç„¶åå¿«é€Ÿä¼˜åŒ–ï¼šé¢„æ„å»ºä¾èµ–ã€æ‰‹åŠ¨åˆ†åŒ…ã€å¯ç”¨å‹ç¼©ã€‚

ä¸€å‘¨å†…å°†åŠ è½½æ—¶é—´é™è‡³ 2.5 ç§’ï¼ŒæŒ‰æ—¶ä¸Šçº¿ï¼Œç”¨æˆ·æ»¡æ„åº¦ 90%+ã€‚

è¿™æ¬¡ç»å†è®©æˆ‘å­¦ä¼šäº†æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ³•è®ºï¼Œä¹Ÿåˆ¶å®šäº†å›¢é˜Ÿçš„æ€§èƒ½ checklistã€‚

---

**é¢è¯•å®˜**ï¼šä½ åœ¨å›¢é˜Ÿä¸­çš„è§’è‰²ï¼Ÿ

**å›ç­”**ï¼š
æˆ‘æ˜¯å‰ç«¯æ¶æ„è´Ÿè´£äººï¼Œè´Ÿè´£ï¼š
1. **æŠ€æœ¯å†³ç­–**ï¼šé€‰å‹æ–¹æ¡ˆã€åˆ¶å®šè§„èŒƒ
2. **æ ¸å¿ƒå¼€å‘**ï¼šå¾®å‰ç«¯ã€æ€§èƒ½ä¼˜åŒ–ã€å·¥ä½œæµç¼–è¾‘å™¨
3. **å›¢é˜Ÿåä½œ**ï¼šæŒ‡å¯¼åˆçº§å¼€å‘ã€Code Reviewã€ç¼–å†™æ–‡æ¡£

æˆ‘å–œæ¬¢æ—¢èƒ½åšæ¶æ„è®¾è®¡ï¼Œåˆèƒ½å†™ä»£ç ï¼Œè¿˜èƒ½å¸®åŠ©å›¢é˜Ÿæˆé•¿ã€‚

---

## æ€»ç»“

è¿™ä»½æ–‡æ¡£æ¶µç›–äº† AgentFactory é¡¹ç›®çš„æ‰€æœ‰æŠ€æœ¯ç‚¹ï¼ŒåŒ…æ‹¬ï¼š
- âœ… æ¯ä¸ªæŠ€æœ¯ç‚¹çš„è¯¦ç»†å®ç°è¿‡ç¨‹
- âœ… é«˜é¢‘é¢è¯•é—®é¢˜ + STAR æ³•åˆ™å›ç­”
- âœ… æŠ€æœ¯æ·±åº¦é—®é¢˜ + åŸç†è§£æ
- âœ… é¡¹ç›®äº®ç‚¹æ€»ç»“ + ç”µæ¢¯æ¼”è®²
- âœ… å¿«é€Ÿè®°å¿†æ¸…å• + æ¨¡æ‹Ÿé¢è¯•

**ä½¿ç”¨å»ºè®®**ï¼š
1. å…ˆé€šè¯»å…¨æ–‡ï¼Œç†è§£æ¯ä¸ªæŠ€æœ¯ç‚¹
2. é‡ç‚¹è®°å¿†"æ ¸å¿ƒæ•°æ®"å’Œ"å…³é”®æŠ€æœ¯è¯"
3. ç»ƒä¹  STAR æ³•åˆ™å›ç­”ï¼Œå½•éŸ³è‡ªæŸ¥
4. æ¨¡æ‹Ÿé¢è¯•ï¼Œå’Œæœ‹å‹äº’ç›¸æé—®
5. é¢è¯•å‰ 1 å¤©ï¼Œå¿«é€Ÿå¤ä¹ "è®°å¿†æ¸…å•"

**ç¥ä½ é¢è¯•é¡ºåˆ©ï¼ğŸ‰**
